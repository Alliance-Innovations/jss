<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">Working Connected | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Documentation</h1><p class="copy mb-0 p-0">Read and search through all the Sitecore JSS documentation</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><form class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autoComplete="off"/><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"></button></form><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="getting-started$Menu" aria-haspopup="true" title="Getting Started">Getting Started<i class="ant-menu-submenu-arrow"></i></div><ul id="getting-started$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/quick-start">1. Quick Start</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/first-component">2. Your First Component</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/jss-server-install">3. JSS Server Setup</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/app-deployment">4. App Deployment</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Fundamentals">Fundamentals<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Client Frameworks">Client Frameworks<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-selected" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Techniques">Techniques<i class="ant-menu-submenu-arrow"></i></div><div></div></li></ul><div class="navbar-nav bd-navbar-nav flex-column"><a class="nav-link" href="/release-notes">Release Notes</a><a class="nav-link" href="/help">Help</a></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="deploying-a-jss-site-to-azure">Deploying a JSS site to Azure</h1>
<blockquote>
  <p>There are many considerations and possible topologies involved in deploying a JSS site to Azure. This guide is designed to be the simplest way to get up and running with a JSS site using <em>integrated mode</em> in Azure, using a version of Sitecore deployed from the Azure Marketplace. In practice a more advanced deployment toolkit would be appropriate that involves source control, automated builds, testing, etc.</p>
</blockquote>
<h2 id="step-1-provision-sitecore-and-jss">Step 1: Provision Sitecore and JSS</h2>
<p>Starting from Sitecore 9.1 release JSS server components can be provisioned alongside with Sitecore through the Azure Marketplace. You will need a JSS-enabled license file. For the purposes of simplicity, choose an XP Developer installation. In production, a more repeatable deployment methodology such as ARM templates and the Sitecore Azure Toolkit should be used, but the Marketplace installation is the simplest to get started with. Consult the Sitecore documentation for help with production Azure setup.</p>
<blockquote>
  <p>After provisioning, ensure to increase the <code>core</code> and <code>master</code> database sizes to at least S2 (50 DTU). Lower scaled databases will cause slow UI and may fail the package installation.</p>
</blockquote>
<h2 id="step-2-install-the-jss-server-components-optional">Step 2: Install the JSS server components (optional)</h2>
<p>In case you already have Sitecore instance in Azure you have to use ARM templates methodology.</p>
<ol>
<li>Download official released Sitecore JSS WDP package https://dev.sitecore.net/Downloads/Sitecore<em>JavaScript</em>Services/110/Sitecore<em>JavaScript</em>Services_1100.aspx</li>
<li>Download ARM templates for the appropriate topology available on the GitHub https://github.com/Sitecore/Sitecore-Azure-Quickstart-Templates/tree/master/JSS</li>
<li>After you download all wdp’s and ARM’s you should preserve all files to some publicly available storage like Azure storage.</li>
<li>Prepare parameters.json file. Content of the file should be similar to the following:</li>
</ol>
<pre><code class="json language-json">{     
    "sqlServerLogin":  
        {"value":  "sql"},

    "sqlServerPassword":  
        {"value":  "Password12345"},

    "jssMsDeployPackageUrl":
        {"value": "&lt;PackageUrl&gt;"},

    "jssCDMsDeployPackageUrl":
        { "value": "&lt;CDPackageUrl&gt;"}
}
</code></pre>
<ol start="5">
<li>Provision JSS. Use following script to perform the provisioning:</li>
</ol>
<pre><code class="powershell language-powershell">param (
    $DeploymentId = “deploymentId”,
    $LicenseXmlPath = "&lt;path to license&gt;",
    $Location = "West Europe",
    $ParametersPath = "&lt;path to parameters file&gt;",
    $Cmdlets = "C:\Sitecore.Azure.Toolkit.2.0.0-r1041-170929\tools",
    $SubscriptionName = "&lt;subscription name&gt;",
    $TemplateUri = "ARM template url"
)

if ((Test-Path "$Cmdlets\Sitecore.Cloud.Cmdlets.psm1") -eq $False) {
    nuget install Sitecore.Azure.Toolkit.Cmdlets -Source http://nuget1dk1:8181/nuget/Cloud/ -x -Prerelease
    $Cmdlets = "$PSScriptRoot\Sitecore.Azure.Toolkit.Cmdlets\Cmdlets"
}

Import-Module "$Cmdlets\Sitecore.Cloud.Cmdlets.psm1" -Verbose

Login-AzureRmAccount
Set-AzureRmContext -SubscriptionName "$SubscriptionName"

Start-SitecoreAzureDeployment `
    -Name $DeploymentId `
    -Location $Location `
    -ArmTemplateUrl $TemplateUri `
    -ArmParametersPath $ParametersPath `
    -LicenseXmlPath $LicenseXmlPath `
    -Verbose
</code></pre>
<ol start="6">
<li><p>Configure Azure Node version: In Azure, the app services come with a very old Node.js version enabled by default. This will cause issues rendering your JSS apps. Configure the <code>WEBSITE_NODE_DEFAULT_VERSION</code> setting on your app service, <a href="https://blogs.msdn.microsoft.com/azureossds/2016/04/20/nodejs-and-npm-versions-on-azure-app-services/">per this article</a>. The same Node version should be used on Azure as is used during development, normally the latest LTS Node release. As of the writing of this documentation, that is 8.9.4. Starting from Sitecore 9.1 Azure Node version set during Sitecore provisioning. Default Azure Node version for Sitecore 9.1 is 8.11.1. Can be changed during the Sitecore provisioning.</p></li>
<li><p>Please make sure that sitecore\JSS Import Service Users role has 'Create Item' and 'Create Descendants' right on 'sitecore\Content' item. If not please assign mentioned security permission in order to allow JSS create content on the Sitecore instance.</p></li>
</ol>
<h2 id="step-3-configure-the-sitecore-server">Step 3: Configure the Sitecore server</h2>
<p>The steps to configure an Azure server to accept a JSS app are mostly the same as for on-premise. Consult the <a href="/docs/getting-started/app-deployment">app deployment</a> documentation for details, and read on for the differences.</p>
<ol>
<li><p>When in Azure, the config deployment step must be performed manually (in production, it should be performed by an automated build step). For our purposes, we can use our FTPS client to deploy the JSS app's <code>/sitecore/config/*</code> files to the Azure website's <code>/site/wwwroot/app_config/include</code> directory.</p>
<blockquote>
  <p>NOTE: If your JSS apps are relying on custom <code>hostName</code> settings, which the default configs are (i.e. <code>hostName="jssreactweb"</code>), you will need to alter this before deploying to Azure. Either the hostName will need to be cleared, making the JSS site the default site, or the hostName will need to be something resolvable in DNS and registered to the Custom Domains of the Azure App Service instance. For simplicity, start by clearing the <code>hostName</code>.</p>
</blockquote></li>
<li><p>When deploying the app to Azure, instead of <code>jss deploy app</code>, use <code>jss deploy items</code> with the same parameters. Because JSS deployment service does not deploy files, we must deploy the files separately to the App Service instance.</p></li>
</ol>
<h2 id="step-4-deploy-the-apps-files">Step 4: Deploy the app's files</h2>
<p>In production, deployment of the JSS app's build artifacts should be done via an automated build setup. For simplicity, we can use FTPS to deploy our build artifacts.</p>
<ol>
<li><p>Build your JSS app using <code>jss build</code>, and collect its artifacts.</p>
<ul>
<li>For the React app, artifacts are in <code>/build</code></li>
<li>For the Angular and Vue apps, artifacts are in <code>/dist</code></li></ul></li>
<li><p>Collect the artifacts and deploy them using FTPS to the App Service under the relative path listed in the <code>sitecoreDistPath</code> setting in your app's <code>package.json</code>. In most cases, this would be <code>/dist/YourAppName</code>, which translates to deploying the build to <code>/site/wwwroot/dist/YourAppName</code> on the app service</p>
<ul>
<li><p>Download your App Service's <code>publishsettings</code> file from the Azure portal</p></li>
<li><p>Locate the FTP connection information within, i.e. </p>
<pre><code>&lt;publishProfile profileName="sitecorejss-999-single - FTP" 
  publishUrl="ftp://waws-prod-mwh-015.ftp.azurewebsites.windows.net/site/wwwroot" 
  userName="sitecorejss-999-single\$sitecorejss-999-single" 
  userPWD="long random pw here"...
</code></pre></li>
<li><p>Using an FTPS client, such as WinSCP, connect to the app service and edit the Web.config file. Ensure to select explicit encryption when connecting.</p></li></ul></li>
<li><p>That's it! Visiting your app's URL should now operate correctly.</p></li>
</ol>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/techniques/working-connected/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"azure-deployment","fields":{"title":{"value":"Azure Deployment"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/techniques/azure-deployment/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{BCBB1198-13D6-5D7F-B20C-023DC46B30E0}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{7EC20D0E-5337-5A4E-86A3-047EDC9A13FE}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{14097D1D-3F48-5EF4-ACDC-80B16A111D73}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"docs"}}}]}}],"jssdocs-main":[{"uid":"{BE0385E8-87B4-5125-92AA-A95A4D9B8B50}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{3D69302C-4AB4-5975-87EF-CDDEDDE696B2}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Documentation"},"text":{"value":"Read and search through all the Sitecore JSS documentation"}}}],"jssdocs-aside":[{"uid":"{1D5910A1-1B26-5F8E-8593-430C11E1E5DA}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"docs"},"useSearch":{"value":"true"}}}],"jssdocs-content":[{"uid":"{6C4771D5-11BA-5AA8-99B1-A573BDFF32D9}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"deploying-a-jss-site-to-azure\">Deploying a JSS site to Azure</h1>\n<blockquote>\n  <p>There are many considerations and possible topologies involved in deploying a JSS site to Azure. This guide is designed to be the simplest way to get up and running with a JSS site using <em>integrated mode</em> in Azure, using a version of Sitecore deployed from the Azure Marketplace. In practice a more advanced deployment toolkit would be appropriate that involves source control, automated builds, testing, etc.</p>\n</blockquote>\n<h2 id=\"step-1-provision-sitecore-and-jss\">Step 1: Provision Sitecore and JSS</h2>\n<p>Starting from Sitecore 9.1 release JSS server components can be provisioned alongside with Sitecore through the Azure Marketplace. You will need a JSS-enabled license file. For the purposes of simplicity, choose an XP Developer installation. In production, a more repeatable deployment methodology such as ARM templates and the Sitecore Azure Toolkit should be used, but the Marketplace installation is the simplest to get started with. Consult the Sitecore documentation for help with production Azure setup.</p>\n<blockquote>\n  <p>After provisioning, ensure to increase the <code>core</code> and <code>master</code> database sizes to at least S2 (50 DTU). Lower scaled databases will cause slow UI and may fail the package installation.</p>\n</blockquote>\n<h2 id=\"step-2-install-the-jss-server-components-optional\">Step 2: Install the JSS server components (optional)</h2>\n<p>In case you already have Sitecore instance in Azure you have to use ARM templates methodology.</p>\n<ol>\n<li>Download official released Sitecore JSS WDP package https://dev.sitecore.net/Downloads/Sitecore<em>JavaScript</em>Services/110/Sitecore<em>JavaScript</em>Services_1100.aspx</li>\n<li>Download ARM templates for the appropriate topology available on the GitHub https://github.com/Sitecore/Sitecore-Azure-Quickstart-Templates/tree/master/JSS</li>\n<li>After you download all wdp’s and ARM’s you should preserve all files to some publicly available storage like Azure storage.</li>\n<li>Prepare parameters.json file. Content of the file should be similar to the following:</li>\n</ol>\n<pre><code class=\"json language-json\">{     \n    \"sqlServerLogin\":  \n        {\"value\":  \"sql\"},\n\n    \"sqlServerPassword\":  \n        {\"value\":  \"Password12345\"},\n\n    \"jssMsDeployPackageUrl\":\n        {\"value\": \"&lt;PackageUrl&gt;\"},\n\n    \"jssCDMsDeployPackageUrl\":\n        { \"value\": \"&lt;CDPackageUrl&gt;\"}\n}\n</code></pre>\n<ol start=\"5\">\n<li>Provision JSS. Use following script to perform the provisioning:</li>\n</ol>\n<pre><code class=\"powershell language-powershell\">param (\n    $DeploymentId = “deploymentId”,\n    $LicenseXmlPath = \"&lt;path to license&gt;\",\n    $Location = \"West Europe\",\n    $ParametersPath = \"&lt;path to parameters file&gt;\",\n    $Cmdlets = \"C:\\Sitecore.Azure.Toolkit.2.0.0-r1041-170929\\tools\",\n    $SubscriptionName = \"&lt;subscription name&gt;\",\n    $TemplateUri = \"ARM template url\"\n)\n\nif ((Test-Path \"$Cmdlets\\Sitecore.Cloud.Cmdlets.psm1\") -eq $False) {\n    nuget install Sitecore.Azure.Toolkit.Cmdlets -Source http://nuget1dk1:8181/nuget/Cloud/ -x -Prerelease\n    $Cmdlets = \"$PSScriptRoot\\Sitecore.Azure.Toolkit.Cmdlets\\Cmdlets\"\n}\n\nImport-Module \"$Cmdlets\\Sitecore.Cloud.Cmdlets.psm1\" -Verbose\n\nLogin-AzureRmAccount\nSet-AzureRmContext -SubscriptionName \"$SubscriptionName\"\n\nStart-SitecoreAzureDeployment `\n    -Name $DeploymentId `\n    -Location $Location `\n    -ArmTemplateUrl $TemplateUri `\n    -ArmParametersPath $ParametersPath `\n    -LicenseXmlPath $LicenseXmlPath `\n    -Verbose\n</code></pre>\n<ol start=\"6\">\n<li><p>Configure Azure Node version: In Azure, the app services come with a very old Node.js version enabled by default. This will cause issues rendering your JSS apps. Configure the <code>WEBSITE_NODE_DEFAULT_VERSION</code> setting on your app service, <a href=\"https://blogs.msdn.microsoft.com/azureossds/2016/04/20/nodejs-and-npm-versions-on-azure-app-services/\">per this article</a>. The same Node version should be used on Azure as is used during development, normally the latest LTS Node release. As of the writing of this documentation, that is 8.9.4. Starting from Sitecore 9.1 Azure Node version set during Sitecore provisioning. Default Azure Node version for Sitecore 9.1 is 8.11.1. Can be changed during the Sitecore provisioning.</p></li>\n<li><p>Please make sure that sitecore\\JSS Import Service Users role has 'Create Item' and 'Create Descendants' right on 'sitecore\\Content' item. If not please assign mentioned security permission in order to allow JSS create content on the Sitecore instance.</p></li>\n</ol>\n<h2 id=\"step-3-configure-the-sitecore-server\">Step 3: Configure the Sitecore server</h2>\n<p>The steps to configure an Azure server to accept a JSS app are mostly the same as for on-premise. Consult the <a href=\"/docs/getting-started/app-deployment\">app deployment</a> documentation for details, and read on for the differences.</p>\n<ol>\n<li><p>When in Azure, the config deployment step must be performed manually (in production, it should be performed by an automated build step). For our purposes, we can use our FTPS client to deploy the JSS app's <code>/sitecore/config/*</code> files to the Azure website's <code>/site/wwwroot/app_config/include</code> directory.</p>\n<blockquote>\n  <p>NOTE: If your JSS apps are relying on custom <code>hostName</code> settings, which the default configs are (i.e. <code>hostName=\"jssreactweb\"</code>), you will need to alter this before deploying to Azure. Either the hostName will need to be cleared, making the JSS site the default site, or the hostName will need to be something resolvable in DNS and registered to the Custom Domains of the Azure App Service instance. For simplicity, start by clearing the <code>hostName</code>.</p>\n</blockquote></li>\n<li><p>When deploying the app to Azure, instead of <code>jss deploy app</code>, use <code>jss deploy items</code> with the same parameters. Because JSS deployment service does not deploy files, we must deploy the files separately to the App Service instance.</p></li>\n</ol>\n<h2 id=\"step-4-deploy-the-apps-files\">Step 4: Deploy the app's files</h2>\n<p>In production, deployment of the JSS app's build artifacts should be done via an automated build setup. For simplicity, we can use FTPS to deploy our build artifacts.</p>\n<ol>\n<li><p>Build your JSS app using <code>jss build</code>, and collect its artifacts.</p>\n<ul>\n<li>For the React app, artifacts are in <code>/build</code></li>\n<li>For the Angular and Vue apps, artifacts are in <code>/dist</code></li></ul></li>\n<li><p>Collect the artifacts and deploy them using FTPS to the App Service under the relative path listed in the <code>sitecoreDistPath</code> setting in your app's <code>package.json</code>. In most cases, this would be <code>/dist/YourAppName</code>, which translates to deploying the build to <code>/site/wwwroot/dist/YourAppName</code> on the app service</p>\n<ul>\n<li><p>Download your App Service's <code>publishsettings</code> file from the Azure portal</p></li>\n<li><p>Locate the FTP connection information within, i.e. </p>\n<pre><code>&lt;publishProfile profileName=\"sitecorejss-999-single - FTP\" \n  publishUrl=\"ftp://waws-prod-mwh-015.ftp.azurewebsites.windows.net/site/wwwroot\" \n  userName=\"sitecorejss-999-single\\$sitecorejss-999-single\" \n  userPWD=\"long random pw here\"...\n</code></pre></li>\n<li><p>Using an FTPS client, such as WinSCP, connect to the app service and edit the Web.config file. Ensure to select explicit encryption when connecting.</p></li></ul></li>\n<li><p>That's it! Visiting your app's URL should now operate correctly.</p></li>\n</ol>\n"}}}]}}],"jssdocs-footer":[{"uid":"{7779B2C7-FBA1-5014-A00A-E2DDC6A78D9D}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{929FE618-4B9D-50D3-A948-32DC35C83526}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{1EB86CFD-F5C7-54B0-A9B2-E15D20EEF385}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{4C691707-32CF-5BDE-B03E-323156943A68}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>