<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">Server Rendering View Bag | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Documentation</h1><p class="copy mb-0 p-0">Read and search through all the Sitecore JSS documentation</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><form class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autoComplete="off"/><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"></button></form><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="getting-started$Menu" aria-haspopup="true" title="Getting Started">Getting Started<i class="ant-menu-submenu-arrow"></i></div><ul id="getting-started$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/quick-start">1. Quick Start</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/first-component">2. Your First Component</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/jss-server-install">3. JSS Server Setup</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/app-deployment">4. App Deployment</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Fundamentals">Fundamentals<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Client Frameworks">Client Frameworks<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-selected" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Techniques">Techniques<i class="ant-menu-submenu-arrow"></i></div><div></div></li></ul><div class="navbar-nav bd-navbar-nav flex-column"><a class="nav-link" href="/release-notes">Release Notes</a><a class="nav-link" href="/help">Help</a></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="configuring-and-debugging-jss-server-side-rendering">Configuring and Debugging JSS Server-Side Rendering</h1>
<p>When running in <a href="/docs/fundamentals/application-modes#integrated-mode">Integrated Mode</a>, Sitecore JSS applications are <a href="/docs/techniques/ssr/integrated-mode-ssr">server-side rendered (SSR)</a> using a Node.js instance before being provided to the client. Via Sitecore configuration files, you can configure the Node.js instance used for server-side rendering. Configuration options include enabling Node.js debugging, allowing you to use any debugger that can attach to a Node.js instance.</p>
<h2 id="default-configuration">Default Configuration</h2>
<p>The default Node.js configuration is used for all Node.js instances that don't have an <a href="#nodejs-instance-configuration">instance-specific configuration</a> defined. The default configuration can also be inherited and overridden by instance-specific configurations. In most cases, especially if you have multiple JSS apps running in the same Sitecore instance, it is not generally recommended to modify the options in the default configuration. Rather, you should create an instance-specific configuration that inherits the defaults and modify options in the instance-specific configuration.</p>
<p>The default Node.js configuration can be found in the following file from your Sitecore instance:<br />
<code>App_Config/Sitecore/JavaScriptServices/Sitecore.JavaScriptServices.ViewEngine.Node.config</code></p>
<p>It should look similar to below. The file is commented, but you can also find information for each configuration option in the <a href="#configuration-options">Configuration Options</a> section.</p>
<pre><code class="xml language-xml">&lt;javaScriptServices&gt;
  &lt;renderEngines&gt;
    &lt;renderEngine name="nodejs"&gt;
      &lt;instance id="defaults"&gt;
        &lt;!--
          If true, the Node.js instance will accept incoming V8 debugger connections (e.g., from node-inspector).
          The node process is invoked with the "inspect" flag.
        --&gt;
        &lt;LaunchWithDebugging&gt;false&lt;/LaunchWithDebugging&gt;
        &lt;!--
          If "launchWithDebugging" is true, the Node.js instance will listen for V8 debugger connections on this port.
          IMPORTANT: Node instances _must_ have unique debugging ports. If you try to create multiple node instances with the same debugger port, those node processes will exit.
          Therefore, it is recommended that you create &lt;instance /&gt; configurations for individual JSS apps / renderings if you wish to use remote SSR debugging features.
        --&gt;
        &lt;DebuggingPort&gt;&lt;/DebuggingPort&gt;
        &lt;!-- If set, the Node.js instance should restart when any matching file on disk within your project changes. --&gt;
        &lt;WatchFileExtensions&gt;.js|.json|.html&lt;/WatchFileExtensions&gt;
        &lt;!--
          If set, starts the Node.js instance with the specified environment variables.
        --&gt;
        &lt;EnvironmentVariables&gt;
          &lt;var name="NODE_ENV" value="production" /&gt;
        &lt;/EnvironmentVariables&gt;
        &lt;!-- Specifies the maximum duration, in milliseconds, that your .NET code should wait for Node.js RPC calls to return. --&gt;
        &lt;InvocationTimeoutMs&gt;60000&lt;/InvocationTimeoutMs&gt;
      &lt;/instance&gt;
    &lt;/renderEngine&gt;
  &lt;/renderEngines&gt;
&lt;/javaScriptServices&gt;
</code></pre>
<h2 id="nodejs-instance-configuration">Node.js Instance Configuration</h2>
<p>Instance-specific Node.js configurations allow you to inherit default configuration options and modify them for specific JSS apps or JavaScript renderings.</p>
<p>For instance-specific Node.js configurations, you assign an <code>id</code> attribute to the <code>&lt;instance /&gt;</code> element and an optional <code>inherits</code> attribute that refers to the name of an <code>&lt;instance /&gt;</code> node to inherit options from.</p>
<h4 id="jss-app-instances">JSS App instances</h4>
<p>For JSS apps, the <code>id</code> attribute is the name of the JSS JSS app the Node.js instance is associated with - each JSS app will have its own Node.js instance. The name of a JSS app is defined in the Sitecore config file for the app. For instance, the sample React app - named "JssReactWeb" is registered as follows:</p>
<pre><code class="xml language-xml">&lt;javaScriptServices&gt;
  &lt;apps&gt;
    &lt;!-- note: other app attributes omitted for brevity --&gt;
    &lt;app name="JssReactWeb" inherits="defaults" /&gt;
  &lt;/apps&gt;
&lt;/javaScriptServices&gt;
</code></pre>
<p>Therefore, an instance-specific Node.js configuration could look like below. All configuration options defined within the <code>&lt;instance /&gt;</code> element are then specific to the "JssReactWeb" app.</p>
<pre><code class="xml language-xml">&lt;javaScriptServices&gt;
  &lt;renderEngines&gt;
    &lt;renderEngine name="nodejs"&gt;
      &lt;instance id="JssReactWeb" inherits="defaults"&gt;
        &lt;LaunchWithDebugging&gt;true&lt;/LaunchWithDebugging&gt;
        &lt;DebuggingPort&gt;9229&lt;/DebuggingPort&gt;
        &lt;WatchFileExtensions inherits="true"&gt;
          &lt;ext&gt;.vbs&lt;/ext&gt;
        &lt;/WatchFileExtensions&gt;
        &lt;EnvironmentVariables inherits="true"&gt;
          &lt;var name="MY_VAR" value="some value" /&gt;
        &lt;/EnvironmentVariables&gt;
      &lt;/instance&gt;
    &lt;/renderEngine&gt;
  &lt;/renderEngines&gt;
&lt;/javaScriptServices&gt;
</code></pre>
<h4 id="javascript-rendering-instances">JavaScript Rendering instances</h4>
<p>When using Node.js to render individual JavaScript renderings, the <code>id</code> attribute assigned to an <code>&lt;instance /&gt;</code> element will be the value specified within the rendering <code>Server Script Path</code> field, e.g. <code>/dist/myComponents/components.bundle.js</code>. This means there will be at least one Node.js instance per script path.</p>
<pre><code class="xml language-xml">&lt;instance id="/dist/myComponents/components.bundle.js" inherits="defaults"&gt;
  &lt;LaunchWithDebugging&gt;true&lt;/LaunchWithDebugging&gt;
  &lt;DebuggingPort&gt;9230&lt;/DebuggingPort&gt;
  &lt;WatchFileExtensions inherits="true"&gt;
    &lt;ext&gt;.vbs&lt;/ext&gt;
  &lt;/WatchFileExtensions&gt;
  &lt;EnvironmentVariables inherits="true"&gt;
    &lt;var name="MY_VAR" value="some value" /&gt;
  &lt;/EnvironmentVariables&gt;
&lt;/instance&gt;
</code></pre>
<blockquote>
  <p>IMPORTANT: It is easy to imagine a scenario where there are multiple JavaScript renderings per route/item, each using a separate Node.js instance. Therefore, it is HIGHLY recommended that your individual JavaScript renderings are bundled into as few files as possible to prevent the creation of an overwhelming number of node instances. <a href="/docs/techniques/mvc-integration/javascript-rendering">More information on Sitecore JavaScript renderings</a></p>
</blockquote>
<h4 id="configuration-inheritance">Configuration Inheritance</h4>
<p>Assigning an <code>inherits</code> attribute to the <code>&lt;instance /&gt;</code> element will result in the instance-specific configuration inheriting configuration option values from the inherited configuration.</p>
<p>For the <code>WatchFileExtensions</code> and <code>EnvironmentVariables</code> configuration options, you can also specify an <code>inherits</code> attribute on the option definition itself to determine how that option inherits values.</p>
<ul>
<li>Setting the <code>inherits</code> attribute to <code>true</code> on the <code>WatchFileExtensions</code> or <code>EnvironmentVariables</code> elements will merge the per-instance options with any inherited options. Example:</li>
</ul>
<pre><code class="xml language-xml">&lt;instance id="base"&gt;
  &lt;WatchFileExtensions&gt;
    &lt;ext&gt;.js|.json&lt;/ext&gt;
  &lt;/WatchFileExtensions&gt;
  &lt;EnvironmentVariables&gt;
    &lt;var name="NODE_ENV" value="production" /&gt;
  &lt;/EnvironmentVariables&gt;
&lt;/instance&gt;

&lt;instance id="my-jss-app" inherits="base"&gt;
  &lt;WatchFileExtensions inherits="true"&gt;
    &lt;ext&gt;.html&lt;/ext&gt;
  &lt;/WatchFileExtensions&gt;
  &lt;EnvironmentVariables&gt;
    &lt;var name="MY_VAR" value="some value" /&gt;
  &lt;/EnvironmentVariables&gt;
&lt;/instance&gt;

&lt;!--

resulting `WatchFileExtensions` value for `my-jss-app` will be equivalent to:
`.js|.json|.html`

resulting `EnvironmentVariables` value for `my-jss-app` will be equivalent to:
&lt;var name="NODE_ENV" value="production" /&gt;
&lt;var name="MY_VAR" value="some value" /&gt;

--&gt;
</code></pre>
<ul>
<li>Setting the <code>inherits</code> attribute to <code>false</code> on the <code>WatchFileExtensions</code> or <code>EnvironmentVariables</code> elements means the per-instance options will be the <em>only</em> option values used. Example:</li>
</ul>
<pre><code class="xml language-xml">&lt;instance id="base"&gt;
  &lt;WatchFileExtensions&gt;
    &lt;ext&gt;.js|.json&lt;/ext&gt;
  &lt;/WatchFileExtensions&gt;
  &lt;EnvironmentVariables&gt;
    &lt;var name="NODE_ENV" value="production" /&gt;
  &lt;/EnvironmentVariables&gt;
&lt;/instance&gt;

&lt;instance id="my-jss-app" inherits="base"&gt;
  &lt;WatchFileExtensions inherits="true"&gt;
    &lt;ext&gt;.html&lt;/ext&gt;
  &lt;/WatchFileExtensions&gt;
  &lt;EnvironmentVariables&gt;
    &lt;var name="MY_VAR" value="some value" /&gt;
  &lt;/EnvironmentVariables&gt;
&lt;/instance&gt;

&lt;!--

resulting `WatchFileExtensions` value for `my-jss-app` will be equivalent to:
`.html`

resulting `EnvironmentVariables` value for `my-jss-app` will be equivalent to:
&lt;var name="MY_VAR" value="some value" /&gt;

--&gt;
</code></pre>
<ul>
<li>For <code>EnvironmentVariables</code>, if <code>inherits</code> is true and any variable names (keys) collide with inherited variables, the per-instance variable value will be used. Example:</li>
</ul>
<pre><code class="xml language-xml">&lt;instance id="base"&gt;
  &lt;EnvironmentVariables&gt;
    &lt;var name="NODE_ENV" value="production" /&gt;
  &lt;/EnvironmentVariables&gt;
&lt;/instance&gt;

&lt;instance id="my-jss-app" inherits="base"&gt;
  &lt;EnvironmentVariables&gt;
    &lt;var name="NODE_ENV" value="development" /&gt;
  &lt;/EnvironmentVariables&gt;
&lt;/instance&gt;

&lt;!--

resulting `EnvironmentVariables` value for `my-jss-app` will be equivalent to:
&lt;var name="MY_VAR" value="development" /&gt;

--&gt;
</code></pre>
<h2 id="debugging">Debugging</h2>
<p>By default, Node.js debugging is disabled. You must enable it via Node.js instance configuration options.</p>
<blockquote>
  <p>IMPORTANT: Node instances <em>must</em> have unique debugging ports. If you try to create multiple node instances with the same debugger port, those node processes will exit.</p>
</blockquote>
<p>Once Node.js debugging is enabled for an instance, you can attach a debugger client, e.g. VS Code, Chrome DevTools, etc… Basic information for attaching various inspector clients can be found in the <a href="https://nodejs.org/en/docs/guides/debugging-getting-started/#inspector-clients">Node.js Debugging Guide</a>. If you use VS Code, detailed information for attaching a debugger to a Node.js instance can be found in the <a href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging">VS Code documentation</a></p>
<blockquote>
  <p>NOTE: Node.js instances started by Sitecore JSS use the <code>--inspect</code> switch when debugging is enabled.</p>
</blockquote>
<p>More detailed information on Node.js debugging can be found in the <a href="https://nodejs.org/en/docs/guides/debugging-getting-started/">Node.js Debugging Guide</a></p>
<h2 id="configuration-options">Configuration Options</h2>
<table>
<thead>
<tr>
<th>Option name</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>LaunchWithDebugging</td>
<td>false</td>
<td>If true, the Node.js instance will accept incoming V8 debugger connections (e.g., from node-inspector). The node process is invoked with the <code>inspect</code> flag.</td>
</tr>
<tr>
<td>DebuggingPort</td>
<td>null</td>
<td>If "LaunchWithDebugging" is true, the Node.js instance will listen for V8 debugger connections on this port. IMPORTANT: Node instances <em>must</em> have unique debugging ports.</td>
</tr>
<tr>
<td>WatchFileExtensions</td>
<td>.js, .json, .html</td>
<td>If set, the Node.js instance should restart when any matching file on disk within your project changes. NOTE: this will not recycle the IIS process nor will it reload your app in a browser. Instead, the Node.js instance used for SSR is restarted, thereby clearing any caches or removing resource locks held by the Node.js process.</td>
</tr>
<tr>
<td>EnvironmentVariables</td>
<td><code>&lt;var name="NODE_ENV" value="production" /&gt;</code></td>
<td>Environment variables that are passed to the Node.js instance on startup.</td>
</tr>
<tr>
<td>InvocationTimeoutMs</td>
<td>60000</td>
<td>Specifies the maximum duration, in milliseconds, that your .NET code should wait for Node.js RPC calls to return.</td>
</tr>
</tbody>
</table>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/techniques/ssr/server-rendering-viewbag/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"configuring-and-debugging-ssr","fields":{"title":{"value":"Configuring and Debugging Server-Side Rendering"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/techniques/ssr/configuring-and-debugging-ssr/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{03F2F035-D6C4-5DF7-AAB2-0A582CE75817}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{1EA74B49-6488-5CDA-B005-E249E529D77A}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{BC55DA64-3521-5751-B17C-AF7D9AD85BF8}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"docs"}}}]}}],"jssdocs-main":[{"uid":"{C5E4FA32-FD72-5FD6-AF3F-DC626493C306}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{E25A50B7-2E67-5FED-A72A-646D24B6550E}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Documentation"},"text":{"value":"Read and search through all the Sitecore JSS documentation"}}}],"jssdocs-aside":[{"uid":"{2D24C83E-14C4-523C-AB20-17FDF2514548}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"docs"},"useSearch":{"value":"true"}}}],"jssdocs-content":[{"uid":"{C8822241-2F15-505A-AADC-355C7C69A1EB}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"configuring-and-debugging-jss-server-side-rendering\">Configuring and Debugging JSS Server-Side Rendering</h1>\n<p>When running in <a href=\"/docs/fundamentals/application-modes#integrated-mode\">Integrated Mode</a>, Sitecore JSS applications are <a href=\"/docs/techniques/ssr/integrated-mode-ssr\">server-side rendered (SSR)</a> using a Node.js instance before being provided to the client. Via Sitecore configuration files, you can configure the Node.js instance used for server-side rendering. Configuration options include enabling Node.js debugging, allowing you to use any debugger that can attach to a Node.js instance.</p>\n<h2 id=\"default-configuration\">Default Configuration</h2>\n<p>The default Node.js configuration is used for all Node.js instances that don't have an <a href=\"#nodejs-instance-configuration\">instance-specific configuration</a> defined. The default configuration can also be inherited and overridden by instance-specific configurations. In most cases, especially if you have multiple JSS apps running in the same Sitecore instance, it is not generally recommended to modify the options in the default configuration. Rather, you should create an instance-specific configuration that inherits the defaults and modify options in the instance-specific configuration.</p>\n<p>The default Node.js configuration can be found in the following file from your Sitecore instance:<br />\n<code>App_Config/Sitecore/JavaScriptServices/Sitecore.JavaScriptServices.ViewEngine.Node.config</code></p>\n<p>It should look similar to below. The file is commented, but you can also find information for each configuration option in the <a href=\"#configuration-options\">Configuration Options</a> section.</p>\n<pre><code class=\"xml language-xml\">&lt;javaScriptServices&gt;\n  &lt;renderEngines&gt;\n    &lt;renderEngine name=\"nodejs\"&gt;\n      &lt;instance id=\"defaults\"&gt;\n        &lt;!--\n          If true, the Node.js instance will accept incoming V8 debugger connections (e.g., from node-inspector).\n          The node process is invoked with the \"inspect\" flag.\n        --&gt;\n        &lt;LaunchWithDebugging&gt;false&lt;/LaunchWithDebugging&gt;\n        &lt;!--\n          If \"launchWithDebugging\" is true, the Node.js instance will listen for V8 debugger connections on this port.\n          IMPORTANT: Node instances _must_ have unique debugging ports. If you try to create multiple node instances with the same debugger port, those node processes will exit.\n          Therefore, it is recommended that you create &lt;instance /&gt; configurations for individual JSS apps / renderings if you wish to use remote SSR debugging features.\n        --&gt;\n        &lt;DebuggingPort&gt;&lt;/DebuggingPort&gt;\n        &lt;!-- If set, the Node.js instance should restart when any matching file on disk within your project changes. --&gt;\n        &lt;WatchFileExtensions&gt;.js|.json|.html&lt;/WatchFileExtensions&gt;\n        &lt;!--\n          If set, starts the Node.js instance with the specified environment variables.\n        --&gt;\n        &lt;EnvironmentVariables&gt;\n          &lt;var name=\"NODE_ENV\" value=\"production\" /&gt;\n        &lt;/EnvironmentVariables&gt;\n        &lt;!-- Specifies the maximum duration, in milliseconds, that your .NET code should wait for Node.js RPC calls to return. --&gt;\n        &lt;InvocationTimeoutMs&gt;60000&lt;/InvocationTimeoutMs&gt;\n      &lt;/instance&gt;\n    &lt;/renderEngine&gt;\n  &lt;/renderEngines&gt;\n&lt;/javaScriptServices&gt;\n</code></pre>\n<h2 id=\"nodejs-instance-configuration\">Node.js Instance Configuration</h2>\n<p>Instance-specific Node.js configurations allow you to inherit default configuration options and modify them for specific JSS apps or JavaScript renderings.</p>\n<p>For instance-specific Node.js configurations, you assign an <code>id</code> attribute to the <code>&lt;instance /&gt;</code> element and an optional <code>inherits</code> attribute that refers to the name of an <code>&lt;instance /&gt;</code> node to inherit options from.</p>\n<h4 id=\"jss-app-instances\">JSS App instances</h4>\n<p>For JSS apps, the <code>id</code> attribute is the name of the JSS JSS app the Node.js instance is associated with - each JSS app will have its own Node.js instance. The name of a JSS app is defined in the Sitecore config file for the app. For instance, the sample React app - named \"JssReactWeb\" is registered as follows:</p>\n<pre><code class=\"xml language-xml\">&lt;javaScriptServices&gt;\n  &lt;apps&gt;\n    &lt;!-- note: other app attributes omitted for brevity --&gt;\n    &lt;app name=\"JssReactWeb\" inherits=\"defaults\" /&gt;\n  &lt;/apps&gt;\n&lt;/javaScriptServices&gt;\n</code></pre>\n<p>Therefore, an instance-specific Node.js configuration could look like below. All configuration options defined within the <code>&lt;instance /&gt;</code> element are then specific to the \"JssReactWeb\" app.</p>\n<pre><code class=\"xml language-xml\">&lt;javaScriptServices&gt;\n  &lt;renderEngines&gt;\n    &lt;renderEngine name=\"nodejs\"&gt;\n      &lt;instance id=\"JssReactWeb\" inherits=\"defaults\"&gt;\n        &lt;LaunchWithDebugging&gt;true&lt;/LaunchWithDebugging&gt;\n        &lt;DebuggingPort&gt;9229&lt;/DebuggingPort&gt;\n        &lt;WatchFileExtensions inherits=\"true\"&gt;\n          &lt;ext&gt;.vbs&lt;/ext&gt;\n        &lt;/WatchFileExtensions&gt;\n        &lt;EnvironmentVariables inherits=\"true\"&gt;\n          &lt;var name=\"MY_VAR\" value=\"some value\" /&gt;\n        &lt;/EnvironmentVariables&gt;\n      &lt;/instance&gt;\n    &lt;/renderEngine&gt;\n  &lt;/renderEngines&gt;\n&lt;/javaScriptServices&gt;\n</code></pre>\n<h4 id=\"javascript-rendering-instances\">JavaScript Rendering instances</h4>\n<p>When using Node.js to render individual JavaScript renderings, the <code>id</code> attribute assigned to an <code>&lt;instance /&gt;</code> element will be the value specified within the rendering <code>Server Script Path</code> field, e.g. <code>/dist/myComponents/components.bundle.js</code>. This means there will be at least one Node.js instance per script path.</p>\n<pre><code class=\"xml language-xml\">&lt;instance id=\"/dist/myComponents/components.bundle.js\" inherits=\"defaults\"&gt;\n  &lt;LaunchWithDebugging&gt;true&lt;/LaunchWithDebugging&gt;\n  &lt;DebuggingPort&gt;9230&lt;/DebuggingPort&gt;\n  &lt;WatchFileExtensions inherits=\"true\"&gt;\n    &lt;ext&gt;.vbs&lt;/ext&gt;\n  &lt;/WatchFileExtensions&gt;\n  &lt;EnvironmentVariables inherits=\"true\"&gt;\n    &lt;var name=\"MY_VAR\" value=\"some value\" /&gt;\n  &lt;/EnvironmentVariables&gt;\n&lt;/instance&gt;\n</code></pre>\n<blockquote>\n  <p>IMPORTANT: It is easy to imagine a scenario where there are multiple JavaScript renderings per route/item, each using a separate Node.js instance. Therefore, it is HIGHLY recommended that your individual JavaScript renderings are bundled into as few files as possible to prevent the creation of an overwhelming number of node instances. <a href=\"/docs/techniques/mvc-integration/javascript-rendering\">More information on Sitecore JavaScript renderings</a></p>\n</blockquote>\n<h4 id=\"configuration-inheritance\">Configuration Inheritance</h4>\n<p>Assigning an <code>inherits</code> attribute to the <code>&lt;instance /&gt;</code> element will result in the instance-specific configuration inheriting configuration option values from the inherited configuration.</p>\n<p>For the <code>WatchFileExtensions</code> and <code>EnvironmentVariables</code> configuration options, you can also specify an <code>inherits</code> attribute on the option definition itself to determine how that option inherits values.</p>\n<ul>\n<li>Setting the <code>inherits</code> attribute to <code>true</code> on the <code>WatchFileExtensions</code> or <code>EnvironmentVariables</code> elements will merge the per-instance options with any inherited options. Example:</li>\n</ul>\n<pre><code class=\"xml language-xml\">&lt;instance id=\"base\"&gt;\n  &lt;WatchFileExtensions&gt;\n    &lt;ext&gt;.js|.json&lt;/ext&gt;\n  &lt;/WatchFileExtensions&gt;\n  &lt;EnvironmentVariables&gt;\n    &lt;var name=\"NODE_ENV\" value=\"production\" /&gt;\n  &lt;/EnvironmentVariables&gt;\n&lt;/instance&gt;\n\n&lt;instance id=\"my-jss-app\" inherits=\"base\"&gt;\n  &lt;WatchFileExtensions inherits=\"true\"&gt;\n    &lt;ext&gt;.html&lt;/ext&gt;\n  &lt;/WatchFileExtensions&gt;\n  &lt;EnvironmentVariables&gt;\n    &lt;var name=\"MY_VAR\" value=\"some value\" /&gt;\n  &lt;/EnvironmentVariables&gt;\n&lt;/instance&gt;\n\n&lt;!--\n\nresulting `WatchFileExtensions` value for `my-jss-app` will be equivalent to:\n`.js|.json|.html`\n\nresulting `EnvironmentVariables` value for `my-jss-app` will be equivalent to:\n&lt;var name=\"NODE_ENV\" value=\"production\" /&gt;\n&lt;var name=\"MY_VAR\" value=\"some value\" /&gt;\n\n--&gt;\n</code></pre>\n<ul>\n<li>Setting the <code>inherits</code> attribute to <code>false</code> on the <code>WatchFileExtensions</code> or <code>EnvironmentVariables</code> elements means the per-instance options will be the <em>only</em> option values used. Example:</li>\n</ul>\n<pre><code class=\"xml language-xml\">&lt;instance id=\"base\"&gt;\n  &lt;WatchFileExtensions&gt;\n    &lt;ext&gt;.js|.json&lt;/ext&gt;\n  &lt;/WatchFileExtensions&gt;\n  &lt;EnvironmentVariables&gt;\n    &lt;var name=\"NODE_ENV\" value=\"production\" /&gt;\n  &lt;/EnvironmentVariables&gt;\n&lt;/instance&gt;\n\n&lt;instance id=\"my-jss-app\" inherits=\"base\"&gt;\n  &lt;WatchFileExtensions inherits=\"true\"&gt;\n    &lt;ext&gt;.html&lt;/ext&gt;\n  &lt;/WatchFileExtensions&gt;\n  &lt;EnvironmentVariables&gt;\n    &lt;var name=\"MY_VAR\" value=\"some value\" /&gt;\n  &lt;/EnvironmentVariables&gt;\n&lt;/instance&gt;\n\n&lt;!--\n\nresulting `WatchFileExtensions` value for `my-jss-app` will be equivalent to:\n`.html`\n\nresulting `EnvironmentVariables` value for `my-jss-app` will be equivalent to:\n&lt;var name=\"MY_VAR\" value=\"some value\" /&gt;\n\n--&gt;\n</code></pre>\n<ul>\n<li>For <code>EnvironmentVariables</code>, if <code>inherits</code> is true and any variable names (keys) collide with inherited variables, the per-instance variable value will be used. Example:</li>\n</ul>\n<pre><code class=\"xml language-xml\">&lt;instance id=\"base\"&gt;\n  &lt;EnvironmentVariables&gt;\n    &lt;var name=\"NODE_ENV\" value=\"production\" /&gt;\n  &lt;/EnvironmentVariables&gt;\n&lt;/instance&gt;\n\n&lt;instance id=\"my-jss-app\" inherits=\"base\"&gt;\n  &lt;EnvironmentVariables&gt;\n    &lt;var name=\"NODE_ENV\" value=\"development\" /&gt;\n  &lt;/EnvironmentVariables&gt;\n&lt;/instance&gt;\n\n&lt;!--\n\nresulting `EnvironmentVariables` value for `my-jss-app` will be equivalent to:\n&lt;var name=\"MY_VAR\" value=\"development\" /&gt;\n\n--&gt;\n</code></pre>\n<h2 id=\"debugging\">Debugging</h2>\n<p>By default, Node.js debugging is disabled. You must enable it via Node.js instance configuration options.</p>\n<blockquote>\n  <p>IMPORTANT: Node instances <em>must</em> have unique debugging ports. If you try to create multiple node instances with the same debugger port, those node processes will exit.</p>\n</blockquote>\n<p>Once Node.js debugging is enabled for an instance, you can attach a debugger client, e.g. VS Code, Chrome DevTools, etc… Basic information for attaching various inspector clients can be found in the <a href=\"https://nodejs.org/en/docs/guides/debugging-getting-started/#inspector-clients\">Node.js Debugging Guide</a>. If you use VS Code, detailed information for attaching a debugger to a Node.js instance can be found in the <a href=\"https://code.visualstudio.com/docs/nodejs/nodejs-debugging\">VS Code documentation</a></p>\n<blockquote>\n  <p>NOTE: Node.js instances started by Sitecore JSS use the <code>--inspect</code> switch when debugging is enabled.</p>\n</blockquote>\n<p>More detailed information on Node.js debugging can be found in the <a href=\"https://nodejs.org/en/docs/guides/debugging-getting-started/\">Node.js Debugging Guide</a></p>\n<h2 id=\"configuration-options\">Configuration Options</h2>\n<table>\n<thead>\n<tr>\n<th>Option name</th>\n<th>Default value</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LaunchWithDebugging</td>\n<td>false</td>\n<td>If true, the Node.js instance will accept incoming V8 debugger connections (e.g., from node-inspector). The node process is invoked with the <code>inspect</code> flag.</td>\n</tr>\n<tr>\n<td>DebuggingPort</td>\n<td>null</td>\n<td>If \"LaunchWithDebugging\" is true, the Node.js instance will listen for V8 debugger connections on this port. IMPORTANT: Node instances <em>must</em> have unique debugging ports.</td>\n</tr>\n<tr>\n<td>WatchFileExtensions</td>\n<td>.js, .json, .html</td>\n<td>If set, the Node.js instance should restart when any matching file on disk within your project changes. NOTE: this will not recycle the IIS process nor will it reload your app in a browser. Instead, the Node.js instance used for SSR is restarted, thereby clearing any caches or removing resource locks held by the Node.js process.</td>\n</tr>\n<tr>\n<td>EnvironmentVariables</td>\n<td><code>&lt;var name=\"NODE_ENV\" value=\"production\" /&gt;</code></td>\n<td>Environment variables that are passed to the Node.js instance on startup.</td>\n</tr>\n<tr>\n<td>InvocationTimeoutMs</td>\n<td>60000</td>\n<td>Specifies the maximum duration, in milliseconds, that your .NET code should wait for Node.js RPC calls to return.</td>\n</tr>\n</tbody>\n</table>\n"}}}]}}],"jssdocs-footer":[{"uid":"{2C7E5762-22BE-530B-9894-8057D1DD4F8E}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{9C0F01AD-D02C-5A3B-8814-B9B8AB88E0BE}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{83282367-C74E-5D1A-8389-A8EA12786DA7}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{56155442-AA6D-5C3B-8847-D5E8775ECFF8}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>