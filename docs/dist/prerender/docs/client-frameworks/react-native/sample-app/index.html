<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">React-Native Sample App | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Documentation</h1><p class="copy mb-0 p-0">Read and search through all the Sitecore JSS documentation</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><form class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autoComplete="off"/><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"></button></form><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="getting-started$Menu" aria-haspopup="true" title="Getting Started">Getting Started<i class="ant-menu-submenu-arrow"></i></div><ul id="getting-started$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/quick-start">1. Quick Start</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/first-component">2. Your First Component</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/jss-server-install">3. JSS Server Setup</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/app-deployment">4. App Deployment</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Fundamentals">Fundamentals<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-selected" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Client Frameworks">Client Frameworks<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Techniques">Techniques<i class="ant-menu-submenu-arrow"></i></div><div></div></li></ul><div class="navbar-nav bd-navbar-nav flex-column"><a class="nav-link" href="/release-notes">Release Notes</a><a class="nav-link" href="/help">Help</a></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="the-jss-react-native-sample-app">The JSS React-Native Sample App</h1>
<p>JSS React-Native sample app is a practical sample that demonstrates patterns of how to use JSS with React-Native. React Native is marked as <em>experimental</em> because React Native cannot render in the browser (RN apps are intended to be rendered on iOS/Android devices or emulators), so there is no Experience Editor support. This makes RN difficult to setup and difficult to work with. It is strongly recommended that you have prior experience working with JSS, React-Native, the toolchain that React-Native requires, and have some exposure to native app development.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>The basic sample for React Native is based on a project created via the React Native CLI, e.g. <code>react-native init</code><br />
Your first step will be to follow the instructions on this page: https://facebook.github.io/react-native/docs/getting-started.html</p>
<p>Choose the <code>Building Projects with Native Code</code> tab, then choose your Development OS and app Target OS. We have tested the basic sample app on the following configurations:</p>
<ul>
<li>Windows / Android</li>
<li>In this configuration, testing was done using a physical device connected via USB to the development machine, not the Android emulator.</li>
<li>macOS / iOS</li>
<li>In this configuration, testing was done using the Xcode simulator.</li>
</ul>
<p>The installation process for all the necessary Android/iOS dependencies and tools can take a significant amount of time - plan accordingly.</p>
<h2 id="getting-started">Getting Started</h2>
<ol>
<li><p>Ensure you have completed the Prerequisites section and have confirmed you're able to run the <code>AwesomeProject</code> sample that the instructions direct you to create.</p></li>
<li><p>At this point, you can follow steps 1 and 2 from the JSS Quick Start guide: https://jss.sitecore.net/#/setup/quick-start-dev, or the following abbreviated version:</p></li>
<li><p>In a new folder, clone or download the basic sample app repo: https://github.com/Sitecore/jss/tree/master/samples/react-native</p></li>
<li><p>If you don't have Sitecore installed or aren't planning to immediately develop against a Sitecore instance, skip to the next step.</p></li>
</ol>
<ul>
<li>Otherwise, if you have Sitecore installed: from a terminal, run <code>jss setup</code></li>
</ul>
<ol>
<li>Choose your target platform:</li>
</ol>
<ul>
<li><p>Android: run <code>jss start-android</code></p></li>
<li><p>iOS: run <code>jss start-ios</code></p></li>
</ul>
<p>At this point, the React Native build process should start, opening 1 or 2 separate terminal window(s)/tab(s) containing the output from the React Native <code>Metro</code> bundler and the output from the React Native platform-specific compiler (e.g. Xcode, Android SDK).</p>
<p>Once the build process completes, you should see the basic sample app in the simulator or physical device (whichever you're choosing to use). <em>Note: the initial build can take several minutes. Subsequent builds are typically much faster. This is not something specific to JSS, but rather normal behavior for React Native.</em></p>
<p>The app will be running in <code>disconnected</code> application mode. This means data and assets are embedded statically within the app.</p>
<h2 id="build-customizations">Build customizations</h2>
<p>Although the build process is largely the same as "normal" React Native, we've customized the invocation of the process a bit. In particular:</p>
<ul>
<li><p>We've added a custom <code>babel</code> preset that encapsulates other <code>babel</code> plugins that allow us to swap module dependencies at build-time based on the application mode in which you're developing. The basic sample currently uses <code>disconnected</code> and <code>connected</code> modes along with a new, native-specific, <code>disconnected-tunnel</code> mode. More info on that further on in this document.</p></li>
<li><p>For more information about JSS application modes, please refer to the official Sitecore JSS documentation: https://jss.sitecore.net/#/application-modes?id=jss-application-modes</p></li>
<li><p>One other customization to build invocation is the addition of the <code>--reset-cache</code> argument to the metro bundler <code>start</code> script. This argument instructs the bundler to ignore its dependency cache during the build process, which ensures that the <code>babel</code> customizations mentioned earlier are invoked and allows you to easily switch between application modes at build time.</p></li>
</ul>
<h2 id="connecting-to-sitecore">Connecting to Sitecore</h2>
<p>When you're ready to connect to Sitecore for data, you have two application mode options: <code>connected</code> and <code>connected-tunnel</code>.</p>
<h3 id="connected-mode">Connected Mode</h3>
<p>Connected mode essentially means that all route data and network images for your app are retrieved from a remote Sitecore instance. Each target app OS has a npm script for starting connected mode:</p>
<p><code>start-android:connected</code></p>
<p><code>start-ios:connected</code></p>
<p>For more information on Connected mode, please refer to the official Sitecore JSS documentation: https://jss.sitecore.net/#/application-modes?id=connected-developer-mode</p>
<h3 id="connected-tunnel-mode">Connected Tunnel Mode</h3>
<p>Connected tunnel mode is similar to connected mode in that you are connecting to a Sitecore instance for route data and network images, but the Sitecore instance is on your local machine or otherwise unavailable via public DNS.</p>
<p>For example:<br />
You have a Sitecore instance installed on your dev machine and a Sitecore site that is configured to use <code>jssbasicapp</code> for a hostname, and you have host bindings set to <code>jssbasicapp</code> for an IIS site, and <code>jssbasicapp</code> is configured in your hosts file. This a very common scenario for local Sitecore development.</p>
<p>Now imagine testing a native app in either a simulator or on a physical device. The app may try to make requests to <code>http://jssbasicapp</code>, but that host can't be resolved because the simulator/device does not use your local machine for DNS resolution.</p>
<p>This is where Connected Tunnel mode will provide benefit. When you use Connected Tunnel mode, we use an instance of <a href="https://ngrok.com/"><code>ngrok</code></a> to create a tunnel between your simulator / device and your local dev machine. We then modify Layout Service and media requests from your app to use the ngrok tunnel, which will tunnel response data from Sitecore back to your app. This means you don't have to change any host bindings on your dev machine.</p>
<p>Each target app OS has a npm script for starting connected tunnel mode:</p>
<p><code>start-android:connected-tunnel</code></p>
<p><code>start-ios:connected-tunnel</code></p>
<h2 id="routing--state-management">Routing + State Management</h2>
<p>The sample app uses dynamic routing based on the Layout Service (or local route data files in disconnected mode), and uses route/navigation changes to trigger app state changes. Thus tracing the primary execution flow should begin with the route configuration.</p>
<h2 id="client-side-routing">Client-side routing</h2>
<p>Every route is defined in App.js using <a href="https://reactnavigation.org/"><code>react-navigation</code></a>.</p>
<pre><code class="jsx language-jsx">import { createAppContainer } from 'react-navigation'
import { createStackNavigator } from 'react-navigation-stack'

const Navigator = createStackNavigator({
  Home: { screen: Home },
  Styleguide: { screen: Styleguide }
}, {
  initialRouteName: 'Home'
})

const AppNavigator = createAppContainer(Navigator)

export default AppNavigator
</code></pre>
<p>Route includes <code>&lt;Route&gt;</code> that renders components using <code>render</code> function that is coming from props.</p>
<pre><code class="jsx language-jsx">const Home = ({ navigation }) =&gt; (
  &lt;Route 
    path='/'
    render={({ data }) =&gt;
      &lt;Placeholder name='jss-main' rendering={data} navigation={navigation} /&gt;
    }
  /&gt;
);
</code></pre>
<p>In <code>Route.js</code>, Layout Service data is acquired for the current route, and the route and language state of the app are maintained.<br />
The remaining structure of the route is defined by the route data, that defines which components - and their content data - live in each placeholder.</p>
<h2 id="disconnected-mode-support">Disconnected Mode Support</h2>
<p>The JSS disconnected mode enables development of JSS apps using a local mock version of the Sitecore JSS services - Layout Service. This is accomplished in <code>dataService.disconnected.js</code> where <code>getRouteData</code> function imports route data in json format</p>
<h2 id="ui-components">UI Components</h2>
<p>UI components are the most important part of the JSS app. Thankfully, they are no different from any other React-Native component - except that they are dynamically added inside a Placeholder component, which provides them with an ambient <code>fields</code> prop.</p>
<pre><code class="jsx language-jsx">import React from 'react';
import { View } from 'react-native';
import { Text } from '@sitecore-jss/sitecore-jss-react-native';

const Welcome = ({ fields }) =&gt; (
  &lt;View&gt;
    &lt;Text field={fields.title} /&gt;
  &lt;/View&gt;
);

export default Welcome;
</code></pre>
<blockquote>
  <p>While the <code>Welcome</code> component is written as a <em>stateless functional</em><br />
  component because there is no internal component state or need for<br />
  lifecycle methods, you can also use the ES6 class syntax and extend<br />
  from React.Component. Generally speaking, JSS does not place any<br />
  limitations on the usage of normal React-Native conventions.</p>
</blockquote>
<h2 id="handling-sitecore-field-types">Handling Sitecore Field Types</h2>
<p>You probably noticed the <code>&lt;Text /&gt;</code> component being used above. It is a special component that comes with JSS and as a helper for rendering the field value properly for editing inside Content Editor. There are a number of helpers for different field types, such as images, dates, and rich text fields. Consult the Styleguide page in the sample app for working live examples of all these field types.</p>
<h2 id="assets">Assets</h2>
<p>Your app may have two types of assets: <code>static</code> and <code>network</code>. Static assets are those that are embedded as resources in your app. Network assets are those that are retrieved from a remote URL.</p>
<p>When developing in disconnected mode, it may be desirable to treat "future" network assets as static assets. For instance, if you're following a code-first approach, you'll likely have assets in your code base that will eventually be imported into Sitecore. At that point, the asset becomes a network asset. Prior to that, however, you may want to test your app with all assets handled as static.</p>
<p>In React Native, static assets must be referenced in your code with a <code>require()</code> statement so that the React Native packager can resolve references to assets at build time and include them in your app bundle. Unfortunately, the asset path must be static as well, meaning we can't use dynamic values for <code>require()</code> paths.</p>
<p>To help illustrate the issue, let's look at our disconnected data (in <code>/data/routes/en.json</code>). You'll notice it contains an image field referencing <code>/data/media/img/sc_logo.png</code>. When our React native Image component needs to reference that image statically, we need to <code>require</code> it, e.g. <code>require('/data/media/img/sc_logo.png')</code>, but that require can't happen at runtime.</p>
<p>In order to work around this limitation, we map our static assets in disconnected mode and then swap out references to those assets at runtime. For example, look at the <code>/assets/images.disconnected.js</code> file. You can see it exports an object with keys corresponding to an image location and the corresponding static <code>require()</code> statement.</p>
<p>Then, in the <code>/src/dataService/dataService.disconnected.js</code> file, when the disconnected route data is being retrieved, we process the data and replace any static image paths we encounter with the corresponding value from the image object map mentioned earlier.</p>
<p>When working in <code>connected</code> or <code>connected-tunnel</code> mode, we can use the <code>/assets/images.connected.js</code> map, which removes references to images that are retrieved via http.</p>
<h2 id="known-limitations">Known limitations</h2>
<ul>
<li><p>For MacOS, <code>ttab</code> dependency doesn't work in VS Code Powershell terminal.</p></li>
<li><p>For MacOS, the <code>glob</code> pattern used by all other demo apps does not work for finding <code>.sitecore.js</code> files for Sitecore manifest generation: <code>./sitecore/**/*.sitecore.js</code></p></li>
<li><p>For MacOS, Sitecore.Ship may throw an error on manifest package deployment.</p></li>
</ul>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/client-frameworks/react-native/sample-app/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"sample-app","fields":{"title":{"value":"React-Native Sample App"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/client-frameworks/react-native/sample-app/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{7F2568FA-5F2E-5094-B209-7774578D2179}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{57CF8BCA-281B-50B6-9F0D-E8F8BC04E3E9}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{93B2BED1-06C7-5694-9A1B-A16677EF18DE}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"docs"}}}]}}],"jssdocs-main":[{"uid":"{5CA9501F-D556-548E-9D27-457DA64EC55A}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{5090B5BB-B5F7-5030-88C1-8681A46D7550}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Documentation"},"text":{"value":"Read and search through all the Sitecore JSS documentation"}}}],"jssdocs-aside":[{"uid":"{02AF6750-A7D3-548C-BF98-0AEF63FEE17F}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"docs"},"useSearch":{"value":"true"}}}],"jssdocs-content":[{"uid":"{76A4BD5D-5CE4-5748-B19A-1B814AF58737}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"the-jss-react-native-sample-app\">The JSS React-Native Sample App</h1>\n<p>JSS React-Native sample app is a practical sample that demonstrates patterns of how to use JSS with React-Native. React Native is marked as <em>experimental</em> because React Native cannot render in the browser (RN apps are intended to be rendered on iOS/Android devices or emulators), so there is no Experience Editor support. This makes RN difficult to setup and difficult to work with. It is strongly recommended that you have prior experience working with JSS, React-Native, the toolchain that React-Native requires, and have some exposure to native app development.</p>\n<h2 id=\"prerequisites\">Prerequisites</h2>\n<p>The basic sample for React Native is based on a project created via the React Native CLI, e.g. <code>react-native init</code><br />\nYour first step will be to follow the instructions on this page: https://facebook.github.io/react-native/docs/getting-started.html</p>\n<p>Choose the <code>Building Projects with Native Code</code> tab, then choose your Development OS and app Target OS. We have tested the basic sample app on the following configurations:</p>\n<ul>\n<li>Windows / Android</li>\n<li>In this configuration, testing was done using a physical device connected via USB to the development machine, not the Android emulator.</li>\n<li>macOS / iOS</li>\n<li>In this configuration, testing was done using the Xcode simulator.</li>\n</ul>\n<p>The installation process for all the necessary Android/iOS dependencies and tools can take a significant amount of time - plan accordingly.</p>\n<h2 id=\"getting-started\">Getting Started</h2>\n<ol>\n<li><p>Ensure you have completed the Prerequisites section and have confirmed you're able to run the <code>AwesomeProject</code> sample that the instructions direct you to create.</p></li>\n<li><p>At this point, you can follow steps 1 and 2 from the JSS Quick Start guide: https://jss.sitecore.net/#/setup/quick-start-dev, or the following abbreviated version:</p></li>\n<li><p>In a new folder, clone or download the basic sample app repo: https://github.com/Sitecore/jss/tree/master/samples/react-native</p></li>\n<li><p>If you don't have Sitecore installed or aren't planning to immediately develop against a Sitecore instance, skip to the next step.</p></li>\n</ol>\n<ul>\n<li>Otherwise, if you have Sitecore installed: from a terminal, run <code>jss setup</code></li>\n</ul>\n<ol>\n<li>Choose your target platform:</li>\n</ol>\n<ul>\n<li><p>Android: run <code>jss start-android</code></p></li>\n<li><p>iOS: run <code>jss start-ios</code></p></li>\n</ul>\n<p>At this point, the React Native build process should start, opening 1 or 2 separate terminal window(s)/tab(s) containing the output from the React Native <code>Metro</code> bundler and the output from the React Native platform-specific compiler (e.g. Xcode, Android SDK).</p>\n<p>Once the build process completes, you should see the basic sample app in the simulator or physical device (whichever you're choosing to use). <em>Note: the initial build can take several minutes. Subsequent builds are typically much faster. This is not something specific to JSS, but rather normal behavior for React Native.</em></p>\n<p>The app will be running in <code>disconnected</code> application mode. This means data and assets are embedded statically within the app.</p>\n<h2 id=\"build-customizations\">Build customizations</h2>\n<p>Although the build process is largely the same as \"normal\" React Native, we've customized the invocation of the process a bit. In particular:</p>\n<ul>\n<li><p>We've added a custom <code>babel</code> preset that encapsulates other <code>babel</code> plugins that allow us to swap module dependencies at build-time based on the application mode in which you're developing. The basic sample currently uses <code>disconnected</code> and <code>connected</code> modes along with a new, native-specific, <code>disconnected-tunnel</code> mode. More info on that further on in this document.</p></li>\n<li><p>For more information about JSS application modes, please refer to the official Sitecore JSS documentation: https://jss.sitecore.net/#/application-modes?id=jss-application-modes</p></li>\n<li><p>One other customization to build invocation is the addition of the <code>--reset-cache</code> argument to the metro bundler <code>start</code> script. This argument instructs the bundler to ignore its dependency cache during the build process, which ensures that the <code>babel</code> customizations mentioned earlier are invoked and allows you to easily switch between application modes at build time.</p></li>\n</ul>\n<h2 id=\"connecting-to-sitecore\">Connecting to Sitecore</h2>\n<p>When you're ready to connect to Sitecore for data, you have two application mode options: <code>connected</code> and <code>connected-tunnel</code>.</p>\n<h3 id=\"connected-mode\">Connected Mode</h3>\n<p>Connected mode essentially means that all route data and network images for your app are retrieved from a remote Sitecore instance. Each target app OS has a npm script for starting connected mode:</p>\n<p><code>start-android:connected</code></p>\n<p><code>start-ios:connected</code></p>\n<p>For more information on Connected mode, please refer to the official Sitecore JSS documentation: https://jss.sitecore.net/#/application-modes?id=connected-developer-mode</p>\n<h3 id=\"connected-tunnel-mode\">Connected Tunnel Mode</h3>\n<p>Connected tunnel mode is similar to connected mode in that you are connecting to a Sitecore instance for route data and network images, but the Sitecore instance is on your local machine or otherwise unavailable via public DNS.</p>\n<p>For example:<br />\nYou have a Sitecore instance installed on your dev machine and a Sitecore site that is configured to use <code>jssbasicapp</code> for a hostname, and you have host bindings set to <code>jssbasicapp</code> for an IIS site, and <code>jssbasicapp</code> is configured in your hosts file. This a very common scenario for local Sitecore development.</p>\n<p>Now imagine testing a native app in either a simulator or on a physical device. The app may try to make requests to <code>http://jssbasicapp</code>, but that host can't be resolved because the simulator/device does not use your local machine for DNS resolution.</p>\n<p>This is where Connected Tunnel mode will provide benefit. When you use Connected Tunnel mode, we use an instance of <a href=\"https://ngrok.com/\"><code>ngrok</code></a> to create a tunnel between your simulator / device and your local dev machine. We then modify Layout Service and media requests from your app to use the ngrok tunnel, which will tunnel response data from Sitecore back to your app. This means you don't have to change any host bindings on your dev machine.</p>\n<p>Each target app OS has a npm script for starting connected tunnel mode:</p>\n<p><code>start-android:connected-tunnel</code></p>\n<p><code>start-ios:connected-tunnel</code></p>\n<h2 id=\"routing--state-management\">Routing + State Management</h2>\n<p>The sample app uses dynamic routing based on the Layout Service (or local route data files in disconnected mode), and uses route/navigation changes to trigger app state changes. Thus tracing the primary execution flow should begin with the route configuration.</p>\n<h2 id=\"client-side-routing\">Client-side routing</h2>\n<p>Every route is defined in App.js using <a href=\"https://reactnavigation.org/\"><code>react-navigation</code></a>.</p>\n<pre><code class=\"jsx language-jsx\">import { createAppContainer } from 'react-navigation'\nimport { createStackNavigator } from 'react-navigation-stack'\n\nconst Navigator = createStackNavigator({\n  Home: { screen: Home },\n  Styleguide: { screen: Styleguide }\n}, {\n  initialRouteName: 'Home'\n})\n\nconst AppNavigator = createAppContainer(Navigator)\n\nexport default AppNavigator\n</code></pre>\n<p>Route includes <code>&lt;Route&gt;</code> that renders components using <code>render</code> function that is coming from props.</p>\n<pre><code class=\"jsx language-jsx\">const Home = ({ navigation }) =&gt; (\n  &lt;Route \n    path='/'\n    render={({ data }) =&gt;\n      &lt;Placeholder name='jss-main' rendering={data} navigation={navigation} /&gt;\n    }\n  /&gt;\n);\n</code></pre>\n<p>In <code>Route.js</code>, Layout Service data is acquired for the current route, and the route and language state of the app are maintained.<br />\nThe remaining structure of the route is defined by the route data, that defines which components - and their content data - live in each placeholder.</p>\n<h2 id=\"disconnected-mode-support\">Disconnected Mode Support</h2>\n<p>The JSS disconnected mode enables development of JSS apps using a local mock version of the Sitecore JSS services - Layout Service. This is accomplished in <code>dataService.disconnected.js</code> where <code>getRouteData</code> function imports route data in json format</p>\n<h2 id=\"ui-components\">UI Components</h2>\n<p>UI components are the most important part of the JSS app. Thankfully, they are no different from any other React-Native component - except that they are dynamically added inside a Placeholder component, which provides them with an ambient <code>fields</code> prop.</p>\n<pre><code class=\"jsx language-jsx\">import React from 'react';\nimport { View } from 'react-native';\nimport { Text } from '@sitecore-jss/sitecore-jss-react-native';\n\nconst Welcome = ({ fields }) =&gt; (\n  &lt;View&gt;\n    &lt;Text field={fields.title} /&gt;\n  &lt;/View&gt;\n);\n\nexport default Welcome;\n</code></pre>\n<blockquote>\n  <p>While the <code>Welcome</code> component is written as a <em>stateless functional</em><br />\n  component because there is no internal component state or need for<br />\n  lifecycle methods, you can also use the ES6 class syntax and extend<br />\n  from React.Component. Generally speaking, JSS does not place any<br />\n  limitations on the usage of normal React-Native conventions.</p>\n</blockquote>\n<h2 id=\"handling-sitecore-field-types\">Handling Sitecore Field Types</h2>\n<p>You probably noticed the <code>&lt;Text /&gt;</code> component being used above. It is a special component that comes with JSS and as a helper for rendering the field value properly for editing inside Content Editor. There are a number of helpers for different field types, such as images, dates, and rich text fields. Consult the Styleguide page in the sample app for working live examples of all these field types.</p>\n<h2 id=\"assets\">Assets</h2>\n<p>Your app may have two types of assets: <code>static</code> and <code>network</code>. Static assets are those that are embedded as resources in your app. Network assets are those that are retrieved from a remote URL.</p>\n<p>When developing in disconnected mode, it may be desirable to treat \"future\" network assets as static assets. For instance, if you're following a code-first approach, you'll likely have assets in your code base that will eventually be imported into Sitecore. At that point, the asset becomes a network asset. Prior to that, however, you may want to test your app with all assets handled as static.</p>\n<p>In React Native, static assets must be referenced in your code with a <code>require()</code> statement so that the React Native packager can resolve references to assets at build time and include them in your app bundle. Unfortunately, the asset path must be static as well, meaning we can't use dynamic values for <code>require()</code> paths.</p>\n<p>To help illustrate the issue, let's look at our disconnected data (in <code>/data/routes/en.json</code>). You'll notice it contains an image field referencing <code>/data/media/img/sc_logo.png</code>. When our React native Image component needs to reference that image statically, we need to <code>require</code> it, e.g. <code>require('/data/media/img/sc_logo.png')</code>, but that require can't happen at runtime.</p>\n<p>In order to work around this limitation, we map our static assets in disconnected mode and then swap out references to those assets at runtime. For example, look at the <code>/assets/images.disconnected.js</code> file. You can see it exports an object with keys corresponding to an image location and the corresponding static <code>require()</code> statement.</p>\n<p>Then, in the <code>/src/dataService/dataService.disconnected.js</code> file, when the disconnected route data is being retrieved, we process the data and replace any static image paths we encounter with the corresponding value from the image object map mentioned earlier.</p>\n<p>When working in <code>connected</code> or <code>connected-tunnel</code> mode, we can use the <code>/assets/images.connected.js</code> map, which removes references to images that are retrieved via http.</p>\n<h2 id=\"known-limitations\">Known limitations</h2>\n<ul>\n<li><p>For MacOS, <code>ttab</code> dependency doesn't work in VS Code Powershell terminal.</p></li>\n<li><p>For MacOS, the <code>glob</code> pattern used by all other demo apps does not work for finding <code>.sitecore.js</code> files for Sitecore manifest generation: <code>./sitecore/**/*.sitecore.js</code></p></li>\n<li><p>For MacOS, Sitecore.Ship may throw an error on manifest package deployment.</p></li>\n</ul>\n"}}}]}}],"jssdocs-footer":[{"uid":"{31A4B0D1-E7B1-5B04-A423-D42E6F9B5190}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{6C09A30B-D639-5599-82CA-245489476C36}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{BC584173-85C1-5A63-9E16-ECF2A95D9051}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{C6A55584-199F-57EB-9F17-9F083DBB9A08}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>