<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">Sitecore-first Workflow | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Documentation</h1><p class="copy mb-0 p-0">Read and search through all the Sitecore JSS documentation</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><form class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autoComplete="off"/><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"></button></form><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="getting-started$Menu" aria-haspopup="true" title="Getting Started">Getting Started<i class="ant-menu-submenu-arrow"></i></div><ul id="getting-started$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/quick-start">1. Quick Start</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/first-component">2. Your First Component</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/jss-server-install">3. JSS Server Setup</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/app-deployment">4. App Deployment</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-selected" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Fundamentals">Fundamentals<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Client Frameworks">Client Frameworks<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Techniques">Techniques<i class="ant-menu-submenu-arrow"></i></div><div></div></li></ul><div class="navbar-nav bd-navbar-nav flex-column"><a class="nav-link" href="/release-notes">Release Notes</a><a class="nav-link" href="/help">Help</a></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="code-first-workflow">Code-first workflow</h1>
<blockquote>
  <p>When contemplating using code-first workflow, it's important to be aware of the <a href="/docs/techniques/working-disconnected/import-process">limitations of this technique</a> to ensure you make the correct choice of workflow.</p>
</blockquote>
<h2 id="initial-app-deployment">Initial app deployment</h2>
<p>Before deploying, ensure that you have a Sitecore install with JSS server components installed.</p>
<p>The app drives all the initial content hierarchy (routes -&gt; page-level items), renderings (for each component there will be one rendering item in Sitecore) and presentation details on page-level items.</p>
<p>To deploy your app, run:</p>
<pre><code>jss deploy app --includeContent --includeDictionary
</code></pre>
<p>This command will perform the following steps for you, which can also be performed independently if needed:</p>
<ul>
<li><strong>App manifest</strong> generation starts with <code>jss manifest</code>. This will generate the <code>sitecore-import.json</code> file that will be used by <code>jss package</code>.</li>
<li>A JSS <em>manifest package</em> is generated using the manifest created previously, using <code>jss package</code></li>
<li>The app will be built, using <code>jss build</code>.</li>
<li>The manifest package is deployed to Sitecore via the import service endpoint - <code>jss deploy items --includeContent --includeDictionary</code></li>
<li>The build artifacts are copied to the Sitecore instance at the configured location - <code>jss deploy files</code></li>
</ul>
<p>At the end of the process, you will have everything necessary automatically created in Sitecore and your app is expected to render the same way as in the disconnected mode.</p>
<blockquote>
  <p>See the documentation about the <a href="/docs/techniques/working-disconnected/import-process">import process</a> for important information on how import works and how to customize it</p>
</blockquote>
<h2 id="incremental-app-deployment">Incremental app deployment</h2>
<blockquote>
  <p>For a Sitecore-first development process incremental deployments will use <code>jss deploy files</code> only. Package-based deployment is only for code-first scenarios after the initial deployment.</p>
</blockquote>
<p>The same scripted process applies for incremental deployment. If you added a new component that needs to be deployed to Sitecore, you can simply execute <code>jss deploy app</code>, with <code>--includeContent --includeDictionary</code> if appropriate, and the import process will take care of the change.</p>
<blockquote>
  <p>Before using <code>jss deploy app</code> for incremental deployment, read the <a href="/docs/techniques/working-disconnected/import-process">import process</a> documentation for important considerations.</p>
</blockquote>
<p>Here you have more options, however. You may want to deploy changes during development with <code>jss deploy files</code>, for example.</p>
<p>When the content user activity starts, it makes sense to think about the parts of the content tree owned by developers (<code>/sitecore/layout</code> and <code>/sitecore/templates</code>) and which ones are owned by content authors (<code>/sitecore/content</code>). See the <a href="#content-workflow-and-developer-overwrite">Content Workflow and Developer Overwrite</a> section for more information about content ownership.</p>
<h2 id="content-workflow-and-developer-overwrite">Content Workflow and Developer Overwrite</h2>
<p>The JSS import process is designed to gracefully skip items to which the configured import user does not have write permission. This allows you to utilize Sitecore Security to prevent the import from overwriting content which should no longer be "developer-owned."</p>
<p>To further facilitate this, JSS includes a content workflow which is automatically applied to all generated templates. This workflow defines <em>Development Mode</em> and <em>Content Mode</em> states to designate the current "ownership" of a content item.</p>
<p><img src="/assets/img/jss-workflow.png" alt="JSS Workflow" title="JSS Workflow" /></p>
<table>
<thead>
<tr>
<th style="text-align:left;">Workflow State</th>
<th style="text-align:right;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">Development Mode</td>
<td style="text-align:right;">Import can overwrite field values and route item layout.</td>
</tr>
<tr>
<td style="text-align:left;">Content Mode</td>
<td style="text-align:right;">Import user is denied item write access. Import will skip writes on the item. For route items, this means that any rendering changes or updates to datasource items are also skipped.</td>
</tr>
</tbody>
</table>
<p>Note that <em>Development Mode</em> includes an <em>__OnSave</em> command which moves the item into <em>Content Mode</em>. This means that by default, any content changes to an item will force it into <em>Content Mode</em>, to avoid overwrite by subsequent imports.</p>
<blockquote>
  <p>By default the <em>Development Mode</em> workflow state is not publishable. This means that a JSS site that has its content database set to anything other than <em>master</em> (thus enabling workflow and publishing) will not publish content items that are imported from the JSS app manifest without workflow approval. For use-cases where app-based content should be considered "publishable", check the <em>Final</em> checkbox on the <em>Development Mode</em> workflow item in the above screenshot.</p>
</blockquote>
<p>To move an item back to <em>Development Mode</em>, you can use the <em>Allow Developer Overwrite</em> action. As stated in the confirmation dialog presented by that action, doing so can be dangerous. If the developer does not pull the latest content, whatever is imported next will overwrite the existing item content. Even if the developer uses <code>pull-all-route-data</code> to update local data, data and configuration can still be lost, since the route data is not a complete serialization of the item. Examples of data that could still be lost includes:</p>
<ul>
<li>Personalization rules / conditional rendering</li>
<li>Content tests</li>
<li>Final Layout (though it will be pulled in the route data, it would be reimported as Shared Layout)</li>
<li>Specific datasource locations (import will utilize whatever datasource strategy is configured for the app)</li>
<li>etc</li>
</ul>
<p>Therefore it is recommended that you limit use of <em>Allow Developer Overwrite</em> to only scenarios when simple content changes have been made to route and/or its datasources, or potentially when renderings have been added to the Shared Layout.</p>
<p><a href="https://sitecore.stackexchange.com/a/1046">As when deploying items using any tool which can serialize Sitecore items</a>, you need to carefully consider ownership of items when using the import process. Rather than updating the routes through the import, your import may simply provide new components which content authors can utilize on the routes.</p>
<h2 id="front-end-developer-vs-sitecore-developer-item-ownership">Front-end Developer vs Sitecore Developer Item Ownership</h2>
<p>Similar to designating content author "ownership" of content items is JSS's use of Sitecore security to designate developer items which should not be overwritten on import. This would typically include items such as:</p>
<ul>
<li>The app's generated Route template</li>
<li>Datasource templates and their fields</li>
<li>The app's generated main layout</li>
<li>Renderings</li>
<li>Placeholder settings</li>
</ul>
<p>Denying <code>item:write</code> and <code>item:create</code> access to the <code>sitecore\JSS Import Service Users</code> role or the specific import user allows a Sitecore developer or admin to limit items that the front-end developer can create and update. The import process will gracefully skip those items and output a warning indicating that it has done so. This allows the Sitecore developer to tweak the imported items without fear that the changes will be overwritten.</p>
<p><img src="/assets/img/security-item-skip.png" alt="Item skip in import log" title="Item skip in import log" /></p>
<p>To facilitate these restrictions, JSS provides two security presets that can be used to quickly protect items from the import process.</p>
<p><img src="/assets/img/security-presets.png" alt="JSS Security Presets" title="Security presets" /></p>
<blockquote>
  <p>Note that you may need to scroll past the default Sitecore <code>Remove Inherit</code> and <code>Require Login</code> presets to see these options, or use the dropdown button of the <code>Presets</code> box to see them all.</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left;">Preset</th>
<th style="text-align:right;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">No overwrite</td>
<td style="text-align:right;">Denies <code>item:write</code> access to the item and its descendants for the <code>sitecore\JSS Import Service User</code> role. Indicates the import should not overwrite any field values on the item.</td>
</tr>
<tr>
<td style="text-align:left;">No new children</td>
<td style="text-align:right;">Denies <code>item:create</code> access to the item and its desendants for the <code>sitecore\JSS Import Service User</code> role. Indicates the import should not create any new children under the item.</td>
</tr>
</tbody>
</table>
<p>Care should be taken when using this mechanism as it will require additional coordination between the front-end developer and the Sitecore developer if a change is needed to the items in question.</p>
<blockquote>
  <p>You don't necessarily need to restrict writes if you are updating fields which JSS does not touch. JSS import will never delete an item unless "full wipe" mode is enabled. However note that doing this confuses the ownership of the item and could create issues in the future if the JSS import adds support for the field.</p>
</blockquote>
<h2 id="import-full-wipe-mode">Import Full Wipe Mode</h2>
<p>During initial development, when application structure is most volatile, it can be helpful to have a "fresh start" on each import. Enabling <em>Full Wipe</em> mode will delete any imported items at their currently configured path at the start of the import process. It is intended primarily for local development or Continuous Integration configurations, where check-ins from front-end developers are being automatically deployed/imported in a CI environment.</p>
<p><em>Full Wipe</em> has a "double lock" on it and must be enabled in two places:</p>
<ul>
<li>The <em>SitecoreJSS.WipeAllowed</em> setting in Sitecore configuration must be enabled (<code>true</code>) in a configuration patch.</li>
<li>The <em>--wipe</em> parameter (alias <code>-w</code>) must be passed via the JSS CLI <code>deploy</code> command: <code>jss deploy app -c -d -w</code></li>
</ul>
<p>In addition, the <em>SitecoreJSS.WipeMode</em> setting can be used to control whether the import recycles (default) or does a hard delete of the items. Change this setting at your own risk.</p>
<blockquote>
  <p>Care should be taken to ensure that <em>Full Wipe</em> is not enabled in a content entry or production environment. Sitecore configuration rules are in place by default so that the <code>WipeAllowed</code> global setting defaults to <code>true</code> for Sitecore installs that are in the <code>Standalone</code> role. This is designed to make it easy to wipe while developing, but hard to mistakenly wipe a production site (which would have a <code>ContentManagement</code> role)  The paranoid and/or thorough may also wish to disable <code>item:delete</code> access to relevant portions of the content tree for the JSS import role or user.</p>
</blockquote>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/fundamentals/dev-workflows/sitecore-first/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"code-first","fields":{"title":{"value":"Code-first Workflow"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/fundamentals/dev-workflows/code-first/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{2F4E4487-1ABD-583E-8E7B-6C503D24724B}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{62C20FED-E1A5-5D6C-8FAD-71576C4631C0}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{D2919AE3-A5F2-5D64-9565-9FD446CFE306}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"docs"}}}]}}],"jssdocs-main":[{"uid":"{B84776A2-2992-58D0-9A84-06504DEA6FB8}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{EF75E0E8-2174-523D-946F-E3ADF3DB80D6}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Documentation"},"text":{"value":"Read and search through all the Sitecore JSS documentation"}}}],"jssdocs-aside":[{"uid":"{DB4A03F2-74ED-5C92-BA2F-02D7D31762D2}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"docs"},"useSearch":{"value":"true"}}}],"jssdocs-content":[{"uid":"{A33099E9-E877-5E1E-9467-C250036779D8}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"code-first-workflow\">Code-first workflow</h1>\n<blockquote>\n  <p>When contemplating using code-first workflow, it's important to be aware of the <a href=\"/docs/techniques/working-disconnected/import-process\">limitations of this technique</a> to ensure you make the correct choice of workflow.</p>\n</blockquote>\n<h2 id=\"initial-app-deployment\">Initial app deployment</h2>\n<p>Before deploying, ensure that you have a Sitecore install with JSS server components installed.</p>\n<p>The app drives all the initial content hierarchy (routes -&gt; page-level items), renderings (for each component there will be one rendering item in Sitecore) and presentation details on page-level items.</p>\n<p>To deploy your app, run:</p>\n<pre><code>jss deploy app --includeContent --includeDictionary\n</code></pre>\n<p>This command will perform the following steps for you, which can also be performed independently if needed:</p>\n<ul>\n<li><strong>App manifest</strong> generation starts with <code>jss manifest</code>. This will generate the <code>sitecore-import.json</code> file that will be used by <code>jss package</code>.</li>\n<li>A JSS <em>manifest package</em> is generated using the manifest created previously, using <code>jss package</code></li>\n<li>The app will be built, using <code>jss build</code>.</li>\n<li>The manifest package is deployed to Sitecore via the import service endpoint - <code>jss deploy items --includeContent --includeDictionary</code></li>\n<li>The build artifacts are copied to the Sitecore instance at the configured location - <code>jss deploy files</code></li>\n</ul>\n<p>At the end of the process, you will have everything necessary automatically created in Sitecore and your app is expected to render the same way as in the disconnected mode.</p>\n<blockquote>\n  <p>See the documentation about the <a href=\"/docs/techniques/working-disconnected/import-process\">import process</a> for important information on how import works and how to customize it</p>\n</blockquote>\n<h2 id=\"incremental-app-deployment\">Incremental app deployment</h2>\n<blockquote>\n  <p>For a Sitecore-first development process incremental deployments will use <code>jss deploy files</code> only. Package-based deployment is only for code-first scenarios after the initial deployment.</p>\n</blockquote>\n<p>The same scripted process applies for incremental deployment. If you added a new component that needs to be deployed to Sitecore, you can simply execute <code>jss deploy app</code>, with <code>--includeContent --includeDictionary</code> if appropriate, and the import process will take care of the change.</p>\n<blockquote>\n  <p>Before using <code>jss deploy app</code> for incremental deployment, read the <a href=\"/docs/techniques/working-disconnected/import-process\">import process</a> documentation for important considerations.</p>\n</blockquote>\n<p>Here you have more options, however. You may want to deploy changes during development with <code>jss deploy files</code>, for example.</p>\n<p>When the content user activity starts, it makes sense to think about the parts of the content tree owned by developers (<code>/sitecore/layout</code> and <code>/sitecore/templates</code>) and which ones are owned by content authors (<code>/sitecore/content</code>). See the <a href=\"#content-workflow-and-developer-overwrite\">Content Workflow and Developer Overwrite</a> section for more information about content ownership.</p>\n<h2 id=\"content-workflow-and-developer-overwrite\">Content Workflow and Developer Overwrite</h2>\n<p>The JSS import process is designed to gracefully skip items to which the configured import user does not have write permission. This allows you to utilize Sitecore Security to prevent the import from overwriting content which should no longer be \"developer-owned.\"</p>\n<p>To further facilitate this, JSS includes a content workflow which is automatically applied to all generated templates. This workflow defines <em>Development Mode</em> and <em>Content Mode</em> states to designate the current \"ownership\" of a content item.</p>\n<p><img src=\"/assets/img/jss-workflow.png\" alt=\"JSS Workflow\" title=\"JSS Workflow\" /></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left;\">Workflow State</th>\n<th style=\"text-align:right;\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left;\">Development Mode</td>\n<td style=\"text-align:right;\">Import can overwrite field values and route item layout.</td>\n</tr>\n<tr>\n<td style=\"text-align:left;\">Content Mode</td>\n<td style=\"text-align:right;\">Import user is denied item write access. Import will skip writes on the item. For route items, this means that any rendering changes or updates to datasource items are also skipped.</td>\n</tr>\n</tbody>\n</table>\n<p>Note that <em>Development Mode</em> includes an <em>__OnSave</em> command which moves the item into <em>Content Mode</em>. This means that by default, any content changes to an item will force it into <em>Content Mode</em>, to avoid overwrite by subsequent imports.</p>\n<blockquote>\n  <p>By default the <em>Development Mode</em> workflow state is not publishable. This means that a JSS site that has its content database set to anything other than <em>master</em> (thus enabling workflow and publishing) will not publish content items that are imported from the JSS app manifest without workflow approval. For use-cases where app-based content should be considered \"publishable\", check the <em>Final</em> checkbox on the <em>Development Mode</em> workflow item in the above screenshot.</p>\n</blockquote>\n<p>To move an item back to <em>Development Mode</em>, you can use the <em>Allow Developer Overwrite</em> action. As stated in the confirmation dialog presented by that action, doing so can be dangerous. If the developer does not pull the latest content, whatever is imported next will overwrite the existing item content. Even if the developer uses <code>pull-all-route-data</code> to update local data, data and configuration can still be lost, since the route data is not a complete serialization of the item. Examples of data that could still be lost includes:</p>\n<ul>\n<li>Personalization rules / conditional rendering</li>\n<li>Content tests</li>\n<li>Final Layout (though it will be pulled in the route data, it would be reimported as Shared Layout)</li>\n<li>Specific datasource locations (import will utilize whatever datasource strategy is configured for the app)</li>\n<li>etc</li>\n</ul>\n<p>Therefore it is recommended that you limit use of <em>Allow Developer Overwrite</em> to only scenarios when simple content changes have been made to route and/or its datasources, or potentially when renderings have been added to the Shared Layout.</p>\n<p><a href=\"https://sitecore.stackexchange.com/a/1046\">As when deploying items using any tool which can serialize Sitecore items</a>, you need to carefully consider ownership of items when using the import process. Rather than updating the routes through the import, your import may simply provide new components which content authors can utilize on the routes.</p>\n<h2 id=\"front-end-developer-vs-sitecore-developer-item-ownership\">Front-end Developer vs Sitecore Developer Item Ownership</h2>\n<p>Similar to designating content author \"ownership\" of content items is JSS's use of Sitecore security to designate developer items which should not be overwritten on import. This would typically include items such as:</p>\n<ul>\n<li>The app's generated Route template</li>\n<li>Datasource templates and their fields</li>\n<li>The app's generated main layout</li>\n<li>Renderings</li>\n<li>Placeholder settings</li>\n</ul>\n<p>Denying <code>item:write</code> and <code>item:create</code> access to the <code>sitecore\\JSS Import Service Users</code> role or the specific import user allows a Sitecore developer or admin to limit items that the front-end developer can create and update. The import process will gracefully skip those items and output a warning indicating that it has done so. This allows the Sitecore developer to tweak the imported items without fear that the changes will be overwritten.</p>\n<p><img src=\"/assets/img/security-item-skip.png\" alt=\"Item skip in import log\" title=\"Item skip in import log\" /></p>\n<p>To facilitate these restrictions, JSS provides two security presets that can be used to quickly protect items from the import process.</p>\n<p><img src=\"/assets/img/security-presets.png\" alt=\"JSS Security Presets\" title=\"Security presets\" /></p>\n<blockquote>\n  <p>Note that you may need to scroll past the default Sitecore <code>Remove Inherit</code> and <code>Require Login</code> presets to see these options, or use the dropdown button of the <code>Presets</code> box to see them all.</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left;\">Preset</th>\n<th style=\"text-align:right;\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left;\">No overwrite</td>\n<td style=\"text-align:right;\">Denies <code>item:write</code> access to the item and its descendants for the <code>sitecore\\JSS Import Service User</code> role. Indicates the import should not overwrite any field values on the item.</td>\n</tr>\n<tr>\n<td style=\"text-align:left;\">No new children</td>\n<td style=\"text-align:right;\">Denies <code>item:create</code> access to the item and its desendants for the <code>sitecore\\JSS Import Service User</code> role. Indicates the import should not create any new children under the item.</td>\n</tr>\n</tbody>\n</table>\n<p>Care should be taken when using this mechanism as it will require additional coordination between the front-end developer and the Sitecore developer if a change is needed to the items in question.</p>\n<blockquote>\n  <p>You don't necessarily need to restrict writes if you are updating fields which JSS does not touch. JSS import will never delete an item unless \"full wipe\" mode is enabled. However note that doing this confuses the ownership of the item and could create issues in the future if the JSS import adds support for the field.</p>\n</blockquote>\n<h2 id=\"import-full-wipe-mode\">Import Full Wipe Mode</h2>\n<p>During initial development, when application structure is most volatile, it can be helpful to have a \"fresh start\" on each import. Enabling <em>Full Wipe</em> mode will delete any imported items at their currently configured path at the start of the import process. It is intended primarily for local development or Continuous Integration configurations, where check-ins from front-end developers are being automatically deployed/imported in a CI environment.</p>\n<p><em>Full Wipe</em> has a \"double lock\" on it and must be enabled in two places:</p>\n<ul>\n<li>The <em>SitecoreJSS.WipeAllowed</em> setting in Sitecore configuration must be enabled (<code>true</code>) in a configuration patch.</li>\n<li>The <em>--wipe</em> parameter (alias <code>-w</code>) must be passed via the JSS CLI <code>deploy</code> command: <code>jss deploy app -c -d -w</code></li>\n</ul>\n<p>In addition, the <em>SitecoreJSS.WipeMode</em> setting can be used to control whether the import recycles (default) or does a hard delete of the items. Change this setting at your own risk.</p>\n<blockquote>\n  <p>Care should be taken to ensure that <em>Full Wipe</em> is not enabled in a content entry or production environment. Sitecore configuration rules are in place by default so that the <code>WipeAllowed</code> global setting defaults to <code>true</code> for Sitecore installs that are in the <code>Standalone</code> role. This is designed to make it easy to wipe while developing, but hard to mistakenly wipe a production site (which would have a <code>ContentManagement</code> role)  The paranoid and/or thorough may also wish to disable <code>item:delete</code> access to relevant portions of the content tree for the JSS import role or user.</p>\n</blockquote>\n"}}}]}}],"jssdocs-footer":[{"uid":"{E9219772-9A2F-5F62-AD6C-2894CC08B8AA}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{683008CE-F99C-5F9A-93D9-4CB1EB82A06C}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{D0A902F8-5694-562A-84CC-13F0DC3018E3}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{56330D3A-9649-5E25-AA2C-6BE0A8BAC3FE}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/assets/js/highlight.pack.js"></script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>