<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">Upgrading to JSS 9.0 Manifest Packages | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Sitecore JavaScript Services</h1></div></div></div></div></div></div></section><div class="container mt-4 mb-4 mt-md-5 mb-md-5"><div class="row"><main class="col-12 pb-5 main-content"><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="upgrading-from-jss-90-technical-preview-4-to-jss-110-ga">Upgrading from JSS 9.0 (Technical Preview 4) to JSS 11.0 (GA)</h1>
<p>Upgrading a JSS 9.0 or later application to JSS 11.0 is relatively simple.</p>
<h2 id="jss-server-upgrade-sitecore">JSS Server Upgrade (Sitecore)</h2>
<ol>
<li>If you are upgrading Sitecore to Sitecore 9.1 from 9.0.x, do that first.</li>
<li>Upgrade the JSS Server Components. Follow <a href="/docs/getting-started/jss-server-install">the Server Install instructions</a>; original installation and upgrading are the same steps.</li>
<li><em>If upgrading Sitecore to 9.1 only</em>, migrate your SSC API key. In 9.1, the API keys moved to the <code>master</code> database from the <code>core</code> database. The <code>Transfer</code> function can help you move the API key item between databases, or you can elect to create a new key and update the API key in the JSS config.</li>
</ol>
<h2 id="jss-application-upgrade-js">JSS Application Upgrade (JS)</h2>
<ol>
<li><p>For Vue or React apps, ensure to upgrade your referenced <a href="https://reactjs.org/blog/2018/08/01/react-v-16-4-2.html">React version to 16.4.2 or later</a> or <a href="https://twitter.com/vuejs/status/1024754536877973504">Vue to 2.5.17 or later</a> to patch a security issue.</p></li>
<li><p>Upgrade all <code>@sitecore-jss/*</code> packages to the latest 11.x version.</p></li>
<li><p>Update your <code>dataApi</code> usages to provide a <code>fetcher</code>. JSS no longer dictates that you use <code>axios</code> to fetch route data via its API, so you may continue to use <code>axios</code> or implement a similar fetcher in another HTTP library (SSR must be supported):</p>
<ul>
<li>Add <code>axios</code> to your dependencies (<code>npm i axios</code>)</li>
<li>Search for <code>dataApi</code> within your project - in a route handler for most projects. When the <code>dataApi</code> is invoked, ensure that its options include a fetcher. The following code is an example <code>axios</code> fetcher that preserves existing fetch behavior:</li></ul>
<pre><code class="js language-js">  // dataFetcher.js
  import axios from 'axios';

  export function dataFetcher(url, data) {
    return axios({
      url,
      method: data ? 'POST' : 'GET',
      data,
      withCredentials: true,
    });
  }

  // i.e. RouteHandler.js:
  import { dataFetcher } from './path/to/dataFetcher';

  // example dataApi options
  const fetchOptions = {
    layoutServiceConfig: { host: config.sitecoreApiHost },
    querystringParams: { sc_lang: language, sc_apikey: config.sitecoreApiKey },
    // remove any existing requestConfig property and replace with 'fetcher'
    fetcher: dataFetcher,
  };

  // example dataApi call
  const dataResultPromise = dataApi.fetchRouteData('/', fetchOptions);
</code></pre></li>
</ol>
<h2 id="if-using-disconnected-development-manifesting">If using Disconnected Development (manifesting)</h2>
<h3 id="update-for-helix-import-compatibility">Update for Helix import compatibility</h3>
<p>The default import paths when a disconnected app have changed to be Helix-compatible in JSS 11.0. This change brings JSS into compliance with standard Sitecore development procedures, but means that importing a JSS 9 app will cause duplicated items in the new Helix paths when the app is imported. To upgrade, there are two options:</p>
<ol>
<li>Move the existing deployed app Sitecore items into Helix-compatible locations (each needs to be moved to <code>$oldRoot/Project/JssAppName</code> from <code>$oldRoot/JssAppName</code>; the <code>Project</code> folder should already exist after installing JSS 10.0)<ul>
<li>Renderings: <code>/sitecore/layout/Renderings/$appName</code> -&gt; <code>/sitecore/layout/Renderings/Project/$appName</code></li>
<li>Templates: <code>/sitecore/templates/$appName</code> -&gt; <code>/sitecore/templates/Project/$appName</code></li>
<li>Placeholder Settings: <code>/sitecore/layout/Placeholder Settings/$appName</code> -&gt; <code>/sitecore/layout/Placeholder Settings/Project/$appName</code></li>
<li>Layouts: <code>/sitecore/layout/Layouts/JavaScriptServices/$appName</code> -&gt; <code>/sitecore/layout/Layouts/Project/$appName/$appName Layout</code> <strong>NOTE THE LAYOUT ITEM RENAME</strong></li>
<li>After moving these items, running an import should result in no changes reported.</li></ul></li>
<li>Enable the <code>App_Config\Sitecore\JavaScriptServices\Sitecore.JavaScriptServices.Apps.Legacy.disabled</code> config file, which will cause JSS to import apps using the same paths as technical preview versions used. This is appropriate if you to not wish to move items; the Helix mode is entirely config-driven, so this is not considered a deprecated usage.</li>
</ol>
<h3 id="set-insert-options-on-route-templates-in-manifest">Set insert options on route templates in manifest</h3>
<p><strong>Optional</strong>, but maintains imported content compatibility with TP4. This will preserve the ability for authors to easily insert new routes in Sitecore (and you now have the control over which route types can be inserted from the manifest side).</p>
<ol>
<li>Edit <code>/sitecore/definitions.routes.sitecore.js</code></li>
<li>Find <code>manifest.setDefaultRouteType()</code></li>
<li>Add <code>insertOptions: ['App Route'],</code> to the function arguments. </li>
</ol>
<h2 id="if-using-tracking-sitecore-xp-with-xconnect">If using Tracking (Sitecore XP with xConnect)</h2>
<h3 id="add-robot-detection-support">Add robot detection support</h3>
<p>JSS 11.0 supports Sitecore's robot detection features, whereas 9.0 did not and had to disable robot detection. This upgrade is optional, but will allow filtering out robot traffic from your Sitecore analytics data which is generally desirable.</p>
<ol>
<li><p>Remove the following settings from your JSS app's Sitecore config file (for code-first, this is stored in <code>$appRoot/sitecore/config</code>):</p>
<pre><code>&lt;setting name="Analytics.AutoDetectBots" set:value="false" /&gt;
&lt;setting name="Analytics.Robots.IgnoreRobots" set:value="false" /&gt;
</code></pre></li>
<li><p>Compare the <a href="https://github.com/Sitecore/jss/tree/a137e11f39982adb7f0ad9284e16a171c337d990/samples">JSS 9.0 sample app</a> for your selected framework with the <a href="https://github.com/Sitecore/jss/tree/master/samples">JSS 11.0 equivalent sample</a>, and merge the changes into your app relating to <code>VisitorIdentification</code>. Each framework's VI implementation differs slightly.</p></li>
</ol>
<h3 id="add-tracking-api-support">Add tracking API support</h3>
<p>If you wish to track client-side analytics events, goals, outcomes, etc with your JSS app, this is now supported. It is recommended to review the <code>Tracking</code> example component in a JSS 11 sample app's styleguide to see how to integrate tracking with your app.</p>
<h2 id="if-using-graphql">If using GraphQL</h2>
<h3 id="update-api-key-to-explicitly-whitelist-graphql-endpoints">Update API key to explicitly whitelist GraphQL endpoints</h3>
<p>GraphQL in JSS 11.0 requires explicit GraphQL endpoint URL whitelisting on the SSC API key. This allows API keys to grant access to only a subset of GraphQL endpoints. See <a href="/docs/getting-started/app-deployment">the App Deployment guide</a> API key section for details about how to whitelist GraphQL endpoints by URL.</p>
<p>Add the following configurations to your JSS app's GraphQL endpoint configuration (default: <code>$approot/sitecore/config/appname.config</code>) to enable full security when deployed to a content delivery environment:</p>
<pre><code class="xml language-xml">&lt;myAppNameGraphQLEndpoint url="/api/myappname" type="Sitecore.Services.GraphQL.Hosting.DatabaseAwareGraphQLEndpoint, Sitecore.Services.GraphQL.NetFxHost" resolve="true"&gt;
    &lt;!-- ADD THESE HERE; leave the rest alone --&gt;
    &lt;graphiql role:require="ContentDelivery"&gt;false&lt;/graphiql&gt;
    &lt;enableSchemaExport role:require="ContentDelivery"&gt;false&lt;/enableSchemaExport&gt;
    &lt;enableStats role:require="ContentDelivery"&gt;false&lt;/enableStats&gt;
    &lt;enableCacheStats role:require="ContentDelivery"&gt;false&lt;/enableCacheStats&gt;
    &lt;disableIntrospection role:require="ContentDelivery"&gt;true&lt;/disableIntrospection&gt;
&lt;/myAppNameGraphQLEndpoint&gt;
</code></pre>
<h3 id="update-included-templates-path-if-using-helix-import">Update included templates path if using Helix import</h3>
<p>If you use the default import settings which use Helix pathing in JSS 11, the path to your app's templates will have changed. This path needs to be updated in your GraphQL endpoint configuration to add the <code>Project</code> parent folder name:</p>
<pre><code class="xml language-xml">&lt;paths hint="list:AddIncludedPath"&gt;
  &lt;templates&gt;/sitecore/templates/Project/$appName&lt;/templates&gt;
&lt;/paths&gt;
</code></pre>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/upgrade-guides/manifest-packages/en.md">Edit this on GitHub</a></div></main></div></div><div class="container"></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"11.0","fields":{"title":{"value":"Upgrading to JSS 11.0"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/upgrade-guides/11.0/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{65530EAD-4B64-5056-B53B-F1AACEA2B585}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{065C3383-3C39-52F0-B5BE-3DA77143CF0F}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{F2CD0B7D-CCED-5A9B-9CD6-277535243FE6}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{}}]}}],"jssdocs-main":[{"uid":"{FF4CB7B8-A2E2-5BFF-B33D-8A38841C9EF3}","componentName":"PageContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{CDBCC683-6665-5A61-AC93-810CD1BB8937}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Sitecore JavaScript Services"}}}],"jssdocs-content":[{"uid":"{77C9171D-C728-57FB-920A-276007E7522E}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"upgrading-from-jss-90-technical-preview-4-to-jss-110-ga\">Upgrading from JSS 9.0 (Technical Preview 4) to JSS 11.0 (GA)</h1>\n<p>Upgrading a JSS 9.0 or later application to JSS 11.0 is relatively simple.</p>\n<h2 id=\"jss-server-upgrade-sitecore\">JSS Server Upgrade (Sitecore)</h2>\n<ol>\n<li>If you are upgrading Sitecore to Sitecore 9.1 from 9.0.x, do that first.</li>\n<li>Upgrade the JSS Server Components. Follow <a href=\"/docs/getting-started/jss-server-install\">the Server Install instructions</a>; original installation and upgrading are the same steps.</li>\n<li><em>If upgrading Sitecore to 9.1 only</em>, migrate your SSC API key. In 9.1, the API keys moved to the <code>master</code> database from the <code>core</code> database. The <code>Transfer</code> function can help you move the API key item between databases, or you can elect to create a new key and update the API key in the JSS config.</li>\n</ol>\n<h2 id=\"jss-application-upgrade-js\">JSS Application Upgrade (JS)</h2>\n<ol>\n<li><p>For Vue or React apps, ensure to upgrade your referenced <a href=\"https://reactjs.org/blog/2018/08/01/react-v-16-4-2.html\">React version to 16.4.2 or later</a> or <a href=\"https://twitter.com/vuejs/status/1024754536877973504\">Vue to 2.5.17 or later</a> to patch a security issue.</p></li>\n<li><p>Upgrade all <code>@sitecore-jss/*</code> packages to the latest 11.x version.</p></li>\n<li><p>Update your <code>dataApi</code> usages to provide a <code>fetcher</code>. JSS no longer dictates that you use <code>axios</code> to fetch route data via its API, so you may continue to use <code>axios</code> or implement a similar fetcher in another HTTP library (SSR must be supported):</p>\n<ul>\n<li>Add <code>axios</code> to your dependencies (<code>npm i axios</code>)</li>\n<li>Search for <code>dataApi</code> within your project - in a route handler for most projects. When the <code>dataApi</code> is invoked, ensure that its options include a fetcher. The following code is an example <code>axios</code> fetcher that preserves existing fetch behavior:</li></ul>\n<pre><code class=\"js language-js\">  // dataFetcher.js\n  import axios from 'axios';\n\n  export function dataFetcher(url, data) {\n    return axios({\n      url,\n      method: data ? 'POST' : 'GET',\n      data,\n      withCredentials: true,\n    });\n  }\n\n  // i.e. RouteHandler.js:\n  import { dataFetcher } from './path/to/dataFetcher';\n\n  // example dataApi options\n  const fetchOptions = {\n    layoutServiceConfig: { host: config.sitecoreApiHost },\n    querystringParams: { sc_lang: language, sc_apikey: config.sitecoreApiKey },\n    // remove any existing requestConfig property and replace with 'fetcher'\n    fetcher: dataFetcher,\n  };\n\n  // example dataApi call\n  const dataResultPromise = dataApi.fetchRouteData('/', fetchOptions);\n</code></pre></li>\n</ol>\n<h2 id=\"if-using-disconnected-development-manifesting\">If using Disconnected Development (manifesting)</h2>\n<h3 id=\"update-for-helix-import-compatibility\">Update for Helix import compatibility</h3>\n<p>The default import paths when a disconnected app have changed to be Helix-compatible in JSS 11.0. This change brings JSS into compliance with standard Sitecore development procedures, but means that importing a JSS 9 app will cause duplicated items in the new Helix paths when the app is imported. To upgrade, there are two options:</p>\n<ol>\n<li>Move the existing deployed app Sitecore items into Helix-compatible locations (each needs to be moved to <code>$oldRoot/Project/JssAppName</code> from <code>$oldRoot/JssAppName</code>; the <code>Project</code> folder should already exist after installing JSS 10.0)<ul>\n<li>Renderings: <code>/sitecore/layout/Renderings/$appName</code> -&gt; <code>/sitecore/layout/Renderings/Project/$appName</code></li>\n<li>Templates: <code>/sitecore/templates/$appName</code> -&gt; <code>/sitecore/templates/Project/$appName</code></li>\n<li>Placeholder Settings: <code>/sitecore/layout/Placeholder Settings/$appName</code> -&gt; <code>/sitecore/layout/Placeholder Settings/Project/$appName</code></li>\n<li>Layouts: <code>/sitecore/layout/Layouts/JavaScriptServices/$appName</code> -&gt; <code>/sitecore/layout/Layouts/Project/$appName/$appName Layout</code> <strong>NOTE THE LAYOUT ITEM RENAME</strong></li>\n<li>After moving these items, running an import should result in no changes reported.</li></ul></li>\n<li>Enable the <code>App_Config\\Sitecore\\JavaScriptServices\\Sitecore.JavaScriptServices.Apps.Legacy.disabled</code> config file, which will cause JSS to import apps using the same paths as technical preview versions used. This is appropriate if you to not wish to move items; the Helix mode is entirely config-driven, so this is not considered a deprecated usage.</li>\n</ol>\n<h3 id=\"set-insert-options-on-route-templates-in-manifest\">Set insert options on route templates in manifest</h3>\n<p><strong>Optional</strong>, but maintains imported content compatibility with TP4. This will preserve the ability for authors to easily insert new routes in Sitecore (and you now have the control over which route types can be inserted from the manifest side).</p>\n<ol>\n<li>Edit <code>/sitecore/definitions.routes.sitecore.js</code></li>\n<li>Find <code>manifest.setDefaultRouteType()</code></li>\n<li>Add <code>insertOptions: ['App Route'],</code> to the function arguments. </li>\n</ol>\n<h2 id=\"if-using-tracking-sitecore-xp-with-xconnect\">If using Tracking (Sitecore XP with xConnect)</h2>\n<h3 id=\"add-robot-detection-support\">Add robot detection support</h3>\n<p>JSS 11.0 supports Sitecore's robot detection features, whereas 9.0 did not and had to disable robot detection. This upgrade is optional, but will allow filtering out robot traffic from your Sitecore analytics data which is generally desirable.</p>\n<ol>\n<li><p>Remove the following settings from your JSS app's Sitecore config file (for code-first, this is stored in <code>$appRoot/sitecore/config</code>):</p>\n<pre><code>&lt;setting name=\"Analytics.AutoDetectBots\" set:value=\"false\" /&gt;\n&lt;setting name=\"Analytics.Robots.IgnoreRobots\" set:value=\"false\" /&gt;\n</code></pre></li>\n<li><p>Compare the <a href=\"https://github.com/Sitecore/jss/tree/a137e11f39982adb7f0ad9284e16a171c337d990/samples\">JSS 9.0 sample app</a> for your selected framework with the <a href=\"https://github.com/Sitecore/jss/tree/master/samples\">JSS 11.0 equivalent sample</a>, and merge the changes into your app relating to <code>VisitorIdentification</code>. Each framework's VI implementation differs slightly.</p></li>\n</ol>\n<h3 id=\"add-tracking-api-support\">Add tracking API support</h3>\n<p>If you wish to track client-side analytics events, goals, outcomes, etc with your JSS app, this is now supported. It is recommended to review the <code>Tracking</code> example component in a JSS 11 sample app's styleguide to see how to integrate tracking with your app.</p>\n<h2 id=\"if-using-graphql\">If using GraphQL</h2>\n<h3 id=\"update-api-key-to-explicitly-whitelist-graphql-endpoints\">Update API key to explicitly whitelist GraphQL endpoints</h3>\n<p>GraphQL in JSS 11.0 requires explicit GraphQL endpoint URL whitelisting on the SSC API key. This allows API keys to grant access to only a subset of GraphQL endpoints. See <a href=\"/docs/getting-started/app-deployment\">the App Deployment guide</a> API key section for details about how to whitelist GraphQL endpoints by URL.</p>\n<p>Add the following configurations to your JSS app's GraphQL endpoint configuration (default: <code>$approot/sitecore/config/appname.config</code>) to enable full security when deployed to a content delivery environment:</p>\n<pre><code class=\"xml language-xml\">&lt;myAppNameGraphQLEndpoint url=\"/api/myappname\" type=\"Sitecore.Services.GraphQL.Hosting.DatabaseAwareGraphQLEndpoint, Sitecore.Services.GraphQL.NetFxHost\" resolve=\"true\"&gt;\n    &lt;!-- ADD THESE HERE; leave the rest alone --&gt;\n    &lt;graphiql role:require=\"ContentDelivery\"&gt;false&lt;/graphiql&gt;\n    &lt;enableSchemaExport role:require=\"ContentDelivery\"&gt;false&lt;/enableSchemaExport&gt;\n    &lt;enableStats role:require=\"ContentDelivery\"&gt;false&lt;/enableStats&gt;\n    &lt;enableCacheStats role:require=\"ContentDelivery\"&gt;false&lt;/enableCacheStats&gt;\n    &lt;disableIntrospection role:require=\"ContentDelivery\"&gt;true&lt;/disableIntrospection&gt;\n&lt;/myAppNameGraphQLEndpoint&gt;\n</code></pre>\n<h3 id=\"update-included-templates-path-if-using-helix-import\">Update included templates path if using Helix import</h3>\n<p>If you use the default import settings which use Helix pathing in JSS 11, the path to your app's templates will have changed. This path needs to be updated in your GraphQL endpoint configuration to add the <code>Project</code> parent folder name:</p>\n<pre><code class=\"xml language-xml\">&lt;paths hint=\"list:AddIncludedPath\"&gt;\n  &lt;templates&gt;/sitecore/templates/Project/$appName&lt;/templates&gt;\n&lt;/paths&gt;\n</code></pre>\n"}}}]}}],"jssdocs-footer":[{"uid":"{42E41F50-DF0E-52DE-BD3A-DDFB8165F5B0}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{C941C24D-B1F8-52B0-8380-3E5D5A1CEEB3}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{FC3B7225-C65D-56D0-BF60-82366C222192}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{7BDE19F7-A884-5A27-B0A6-9301D89C1DD7}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>