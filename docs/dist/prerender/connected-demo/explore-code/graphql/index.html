<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">Updating a Component | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">JSS Connected Demo</h1><p class="copy mb-0 p-0">Unlock the full potential of Sitecore with JSS in a live demo environment</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="graphql">GraphQL</h1>
<p>GraphQL is a powerful and flexible query language that empowers developers by enabling them to requests exactly the data they need in exactly the format they want.</p>
<p>In this exercise you will build a GraphQL query to fetch data from the remote Sitecore intance and output a list of events for a given location.</p>
<h2 id="explore-where-the-data-lives-in-sitecore-content-editor">Explore where the data lives in Sitecore Content Editor</h2>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL01.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>From the Sitecore desktop, click on <strong>Content Editor</strong>.</p>
      <p>The <strong>Content Editor</strong> is an editing tool that you can use to manage and edit all the content on your website. It is designed for more experienced content authors who are familiar with Sitecore and the functionality that it contains. The Content Editor's appearance and functionality vary depending on the user’s roles, the local security settings, and the customizations that have been implemented on the Sitecore installation.</p>
    </div>
  </div>
<p><p></p>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL02.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>In the content tree on the left, under <em>content &#62; Habitat Fitness > Home</em>, expand the Events node. </p>
      <p>The folders are arranged by region. Keep expanding until you find a base event page node that contains the data for the query. </p>
      <p>Click on <em>Canada &#62; Alberta &#62; Banff &#62; Banff 3 on 3 Basketball Challenge</em>. You can review the content details in the pane on the right.</p>
    </div>
  </div>
<p><p></p>
<p>Now that you know where the data lives, it’s time to create a query.</p>
<h2 id="the-graph-browser">The Graph Browser</h2>
<p>In your browser, navigate to <code>&lt;Sitecore hostname&gt;/Sitecore/api/graph/items/master/ui</code> to bring up the Sitecore Experience Graph Browser.</p>
<p><img src="/assets/img/connected-demo/GraphQL03.png" alt="Habitat Fitness" /></p>
<p>This tool gives users a place to write and test custom queries. The left pane allows for query input. The right pane will display return results.</p>
<p><br><br></p>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL04.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>In the sidebar is the Documentation Explorer, where you can browse through various schemas to see what form the data takes. </p>
      <p>There are three Root Types: Query, Mutation, and Subscription.</p>
      <p>Click on <strong>Query</strong>. You can now view the assorted queries defined in the schema.</p>
    </div>
  </div>
<p><p></p>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL05.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>Explore the schema for <strong>search</strong>. </p>
    </div>
  </div>
<p><p></p>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL06.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>This query returns a <strong>ContentSearchResults</strong> object. Click on that and you will see it has the following fields.</p>
      <p>You will see a results object of the type <strong>ContentSearchResultConnection</strong>.</p>
    </div>
  </div>
<p><p></p>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL07.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>Click on that to find a number of pertinent fields.</p>
      <p>The field of note is the <strong>items</strong> array. This will contain the items the search query will pull back.</p>
    </div>
  </div>
<p><p></p>
<p>Now that you have gathered most of the pertinent info, it’s time to put together a query.</p>
<p>Start by calling search, passing in a <code>fieldsEqual</code> parameter. This will be an array of <em>name : value</em> pairs indicating which fields to specifically query on, and what you want those values to be. If you pass in multiple objects, the query will AND them together. </p>
<pre><code class="javascript language-javascript">{
  search(fieldsEqual: [{
    name: "_fullpath", 
    value: "/sitecore/content/habitatfitness/home/events*"}]) {
    results {
      items {
        name
      }
    }
  }
}
</code></pre>
<p>For this exercise, find all the items under the Events node, so specify a <code>_fullpath</code> value that contains that full path, appended with a wildcard so as to get the node’s children.</p>
<p>Now specify how the return results should be formatted. After looking at the schema for <strong>ContentSearchResults</strong>, you will see a results object of the type <strong>ContentSearchResultConnection</strong>. That object will in turn have an <code>items</code> array. Items have a <code>name</code> property, so just return that for now.</p>
<p><br></p>
<p>Execute the query. You should get the following result.</p>
<p><img src="/assets/img/connected-demo/GraphQL09.png" alt="Habitat Fitness" /></p>
<p>This pulls back every item under the Events node. This isn’t helpful yet, though, as it’s pulling back every node.</p>
<p>Refine the search by searching only for those Event Page nodes that contain the data you want.</p>
<p><br></p>
<p>Return to the Content Editor and view the <em>Canada &#62; Alberta &#62; Banff &#62; Banff 3 on 3 Basketball Challenge</em> node, and verify in “Quick Info” that its template type is event-page.</p>
<p><img src="/assets/img/connected-demo/GraphQL10.png" alt="Habitat Fitness" /></p>
<p><br></p>
<p>Return to the query, and add another object to the <code>fieldsEqual</code> array.</p>
<p>This time, specify that you need these items to also have a <code>_templatename</code> property equal to <code>“event-page”</code>.</p>
<pre><code class="javascript language-javascript">{
  search(fieldsEqual: [
    {name: "_fullpath", value: "/sitecore/content/habitatfitness/home/events*"}, 
    {name: "_templatename", value: "event-page"}]) {
    results {
      items {
        name
      }
    }
  }
}
</code></pre>
<p><br></p>
<p>Execute the query and see that the result set has been refined.</p>
<p><img src="/assets/img/connected-demo/GraphQL12.png" alt="Habitat Fitness" /></p>
<p>Now that you are getting the nodes you need, start pulling the event data for these items.</p>
<p><br></p>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL13.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>To find these in the schema, go back to the Documentation Explorer and drill down to <em>Query &#62; ContentSearchResults &#62; ContentSearchResultConnection</em>, then click on the items type, <strong>ContentSearchResult</strong>.</p>     
    </div>
  </div>
<p><p></p>
<p><br></p>
<p><p><br />
  </p>
<div class="row">
    <div class="col-md-6"> 
      <p><img src="/assets/img/connected-demo/GraphQL14.png" alt="Habitat Fitness"></p>
    </div>
    <div class="col-md-6"> 
      <p>This will show the <strong>ContentSearchResult</strong> schema.</p>      
    </div>
  </div>
<p><p></p>
<p><br></p>
<p>The property you will need is <code>fields</code>, an array of <em>name : value</em> pairs associated with this item. Add it to the query return to see what is available.</p>
<pre><code class="javascript language-javascript">{ 
  search(fieldsEqual: [
    {name:"_fullpath", value:"/sitecore/content/habitatfitness/home/events*"},
    {name:"_templatename", value:"event-page" }
  ]){
    results{
      items {        
        name
        fields{
          name
          value
        }
      }
    }
  }
}
</code></pre>
<p><br></p>
<p>Execute the query and see that each node is pulling back a lot of useful information.</p>
<p><img src="/assets/img/connected-demo/GraphQL16.png" alt="Habitat Fitness" /></p>
<p><br></p>
<p>Too much information, actually, and not in a format that an application can easily reference without iterating through an array every time it needs to retrieve one of these values.</p>
<p>Clean this up by adding your own properties to the result object, and using the <code>field()</code> function to retrieve the field values you want.</p>
<p>Start by setting the items name to the event’s <code>name</code> field. (for clarity, comment out the <code>fields</code> property)</p>
<pre><code class="javascript language-javascript">{ 
  search(fieldsEqual: [
    {name:"_fullpath", value:"/sitecore/content/habitatfitness/home/events*"},
    {name:"_templatename", value:"event-page" }
  ]){
    results{
      items {        
        name: field(name: "name")   
        #fields{
          #name
          #value
        #}
      }
    }
  }
}
</code></pre>
<p><br></p>
<p>Execute the query and get the following.</p>
<p><img src="/assets/img/connected-demo/GraphQL18.png" alt="Habitat Fitness" /></p>
<p><br></p>
<p>Now add a few more fields that you will need, like <code>description</code>, <code>date</code>, <code>image</code>, <code>latitude</code>, <code>longitude</code>, etc. Then set this array of <code>items</code> to a property named <code>events</code>.</p>
<pre><code class="javascript language-javascript">{ 
  search(fieldsEqual: [
    {name:"_fullpath", value:"/sitecore/content/habitatfitness/home/events*"},
    {name:"_templatename", value:"event-page" }
  ]){
    results{
      events: items {        
        name: field(name: "name")   
        description: field(name: "description")      
        date: field(name: "date")
        image: field(name: "image")         
        latitude: field(name: "latitude") 
        longitude: field(name: "longitude")                
      }
    }
  }
}
</code></pre>
<p><br></p>
<p>Execute the query once again and get a nicely formatted result set that looks like this.</p>
<p><img src="/assets/img/connected-demo/GraphQL20.png" alt="Habitat Fitness" /></p>
<p>Excellent! That looks like some usable data! </p>
<p>However, having the image name alone isn’t particularly useful. What is needed to display an image are the src and alt properties. These can be found by accessing the <code>Item</code> object and its <code>fields: [ItemFields]</code> array.</p>
<p>Write a small <em>fragment</em> below the query named ImageQuery. It will cast the incoming <strong>ItemField</strong> as an <strong>ImageField</strong>, returning its <code>alt</code> and <code>src</code> values.</p>
<pre><code class="javascript language-javascript">fragment ImageQuery on ImageField {
  alt
  src
}
</code></pre>
<p>Now add an 'item' property that retrieves a field named <code>image</code>. Have it reference our ImageQuery fragment.</p>
<pre><code class="javascript language-javascript">{ 
  firstSearch: search(fieldsEqual: [
    {name:"_fullpath", value:"/sitecore/content/habitatfitness/home/events*"},
    {name:"_templatename", value:"event-page" }
  ]){
    results{
      items {
        name: field(name: "name")
        description: field(name: "description") 
        date: field(name: "date")
        latitude: field(name: "latitude")
        longitude: field(name: "longitude")
        item{
          image: field(name: "image"){
            ...ImageQuery
          }
        }
      }
    }
  }
}

fragment ImageQuery on ImageField {
  alt
  src
}
</code></pre>
<p><br></p>
<p>Now run the query to see the following:</p>
<p><img src="/assets/img/connected-demo/GraphQL22.png" alt="Habitat Fitness" /></p>
<p>Now the image <code>alt</code> and <code>src</code> data is available to display the image in a component. Excellent!</p>
<p><br></p>
<p>From here, you might want to add facets to the search; For instance, what if you wanted to look for only items associated with a given language? You might also want to narrow the search to a specific province. </p>
<p>There is much you can do, and GraphQL provides plenty of tools with which to modify and refine queries.</p>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/connected-demo/explore-code/updating-component/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"graphql","fields":{"title":{"value":"GraphQL"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/connected-demo/explore-code/graphql/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{16E729AC-781E-5F69-8312-3515743ED995}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{C25C6A93-1F08-580A-8297-6D91A8E25559}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{B0024E4C-6E40-5A6B-87A9-7CD5C629340A}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{}}]}}],"jssdocs-main":[{"uid":"{A40A00D9-BF42-50D9-B7BC-C124389E5AD7}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{"sidenav":{"value":"jssConnected"},"useSearch":{"value":"false"}},"placeholders":{"jssdocs-jumbo":[{"uid":"{8CC63D4D-8A12-54E1-9C9E-1158508F78EA}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"JSS Connected Demo"},"text":{"value":"Unlock the full potential of Sitecore with JSS in a live demo environment"}}}],"jssdocs-content":[{"uid":"{E9806F42-9B3A-5D58-83FE-B8AE77A922DD}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"graphql\">GraphQL</h1>\n<p>GraphQL is a powerful and flexible query language that empowers developers by enabling them to requests exactly the data they need in exactly the format they want.</p>\n<p>In this exercise you will build a GraphQL query to fetch data from the remote Sitecore intance and output a list of events for a given location.</p>\n<h2 id=\"explore-where-the-data-lives-in-sitecore-content-editor\">Explore where the data lives in Sitecore Content Editor</h2>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL01.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>From the Sitecore desktop, click on <strong>Content Editor</strong>.</p>\n      <p>The <strong>Content Editor</strong> is an editing tool that you can use to manage and edit all the content on your website. It is designed for more experienced content authors who are familiar with Sitecore and the functionality that it contains. The Content Editor's appearance and functionality vary depending on the user’s roles, the local security settings, and the customizations that have been implemented on the Sitecore installation.</p>\n    </div>\n  </div>\n<p><p></p>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL02.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>In the content tree on the left, under <em>content &#62; Habitat Fitness > Home</em>, expand the Events node. </p>\n      <p>The folders are arranged by region. Keep expanding until you find a base event page node that contains the data for the query. </p>\n      <p>Click on <em>Canada &#62; Alberta &#62; Banff &#62; Banff 3 on 3 Basketball Challenge</em>. You can review the content details in the pane on the right.</p>\n    </div>\n  </div>\n<p><p></p>\n<p>Now that you know where the data lives, it’s time to create a query.</p>\n<h2 id=\"the-graph-browser\">The Graph Browser</h2>\n<p>In your browser, navigate to <code>&lt;Sitecore hostname&gt;/Sitecore/api/graph/items/master/ui</code> to bring up the Sitecore Experience Graph Browser.</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL03.png\" alt=\"Habitat Fitness\" /></p>\n<p>This tool gives users a place to write and test custom queries. The left pane allows for query input. The right pane will display return results.</p>\n<p><br><br></p>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL04.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>In the sidebar is the Documentation Explorer, where you can browse through various schemas to see what form the data takes. </p>\n      <p>There are three Root Types: Query, Mutation, and Subscription.</p>\n      <p>Click on <strong>Query</strong>. You can now view the assorted queries defined in the schema.</p>\n    </div>\n  </div>\n<p><p></p>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL05.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>Explore the schema for <strong>search</strong>. </p>\n    </div>\n  </div>\n<p><p></p>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL06.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>This query returns a <strong>ContentSearchResults</strong> object. Click on that and you will see it has the following fields.</p>\n      <p>You will see a results object of the type <strong>ContentSearchResultConnection</strong>.</p>\n    </div>\n  </div>\n<p><p></p>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL07.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>Click on that to find a number of pertinent fields.</p>\n      <p>The field of note is the <strong>items</strong> array. This will contain the items the search query will pull back.</p>\n    </div>\n  </div>\n<p><p></p>\n<p>Now that you have gathered most of the pertinent info, it’s time to put together a query.</p>\n<p>Start by calling search, passing in a <code>fieldsEqual</code> parameter. This will be an array of <em>name : value</em> pairs indicating which fields to specifically query on, and what you want those values to be. If you pass in multiple objects, the query will AND them together. </p>\n<pre><code class=\"javascript language-javascript\">{\n  search(fieldsEqual: [{\n    name: \"_fullpath\", \n    value: \"/sitecore/content/habitatfitness/home/events*\"}]) {\n    results {\n      items {\n        name\n      }\n    }\n  }\n}\n</code></pre>\n<p>For this exercise, find all the items under the Events node, so specify a <code>_fullpath</code> value that contains that full path, appended with a wildcard so as to get the node’s children.</p>\n<p>Now specify how the return results should be formatted. After looking at the schema for <strong>ContentSearchResults</strong>, you will see a results object of the type <strong>ContentSearchResultConnection</strong>. That object will in turn have an <code>items</code> array. Items have a <code>name</code> property, so just return that for now.</p>\n<p><br></p>\n<p>Execute the query. You should get the following result.</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL09.png\" alt=\"Habitat Fitness\" /></p>\n<p>This pulls back every item under the Events node. This isn’t helpful yet, though, as it’s pulling back every node.</p>\n<p>Refine the search by searching only for those Event Page nodes that contain the data you want.</p>\n<p><br></p>\n<p>Return to the Content Editor and view the <em>Canada &#62; Alberta &#62; Banff &#62; Banff 3 on 3 Basketball Challenge</em> node, and verify in “Quick Info” that its template type is event-page.</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL10.png\" alt=\"Habitat Fitness\" /></p>\n<p><br></p>\n<p>Return to the query, and add another object to the <code>fieldsEqual</code> array.</p>\n<p>This time, specify that you need these items to also have a <code>_templatename</code> property equal to <code>“event-page”</code>.</p>\n<pre><code class=\"javascript language-javascript\">{\n  search(fieldsEqual: [\n    {name: \"_fullpath\", value: \"/sitecore/content/habitatfitness/home/events*\"}, \n    {name: \"_templatename\", value: \"event-page\"}]) {\n    results {\n      items {\n        name\n      }\n    }\n  }\n}\n</code></pre>\n<p><br></p>\n<p>Execute the query and see that the result set has been refined.</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL12.png\" alt=\"Habitat Fitness\" /></p>\n<p>Now that you are getting the nodes you need, start pulling the event data for these items.</p>\n<p><br></p>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL13.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>To find these in the schema, go back to the Documentation Explorer and drill down to <em>Query &#62; ContentSearchResults &#62; ContentSearchResultConnection</em>, then click on the items type, <strong>ContentSearchResult</strong>.</p>     \n    </div>\n  </div>\n<p><p></p>\n<p><br></p>\n<p><p><br />\n  </p>\n<div class=\"row\">\n    <div class=\"col-md-6\"> \n      <p><img src=\"/assets/img/connected-demo/GraphQL14.png\" alt=\"Habitat Fitness\"></p>\n    </div>\n    <div class=\"col-md-6\"> \n      <p>This will show the <strong>ContentSearchResult</strong> schema.</p>      \n    </div>\n  </div>\n<p><p></p>\n<p><br></p>\n<p>The property you will need is <code>fields</code>, an array of <em>name : value</em> pairs associated with this item. Add it to the query return to see what is available.</p>\n<pre><code class=\"javascript language-javascript\">{ \n  search(fieldsEqual: [\n    {name:\"_fullpath\", value:\"/sitecore/content/habitatfitness/home/events*\"},\n    {name:\"_templatename\", value:\"event-page\" }\n  ]){\n    results{\n      items {        \n        name\n        fields{\n          name\n          value\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p><br></p>\n<p>Execute the query and see that each node is pulling back a lot of useful information.</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL16.png\" alt=\"Habitat Fitness\" /></p>\n<p><br></p>\n<p>Too much information, actually, and not in a format that an application can easily reference without iterating through an array every time it needs to retrieve one of these values.</p>\n<p>Clean this up by adding your own properties to the result object, and using the <code>field()</code> function to retrieve the field values you want.</p>\n<p>Start by setting the items name to the event’s <code>name</code> field. (for clarity, comment out the <code>fields</code> property)</p>\n<pre><code class=\"javascript language-javascript\">{ \n  search(fieldsEqual: [\n    {name:\"_fullpath\", value:\"/sitecore/content/habitatfitness/home/events*\"},\n    {name:\"_templatename\", value:\"event-page\" }\n  ]){\n    results{\n      items {        \n        name: field(name: \"name\")   \n        #fields{\n          #name\n          #value\n        #}\n      }\n    }\n  }\n}\n</code></pre>\n<p><br></p>\n<p>Execute the query and get the following.</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL18.png\" alt=\"Habitat Fitness\" /></p>\n<p><br></p>\n<p>Now add a few more fields that you will need, like <code>description</code>, <code>date</code>, <code>image</code>, <code>latitude</code>, <code>longitude</code>, etc. Then set this array of <code>items</code> to a property named <code>events</code>.</p>\n<pre><code class=\"javascript language-javascript\">{ \n  search(fieldsEqual: [\n    {name:\"_fullpath\", value:\"/sitecore/content/habitatfitness/home/events*\"},\n    {name:\"_templatename\", value:\"event-page\" }\n  ]){\n    results{\n      events: items {        \n        name: field(name: \"name\")   \n        description: field(name: \"description\")      \n        date: field(name: \"date\")\n        image: field(name: \"image\")         \n        latitude: field(name: \"latitude\") \n        longitude: field(name: \"longitude\")                \n      }\n    }\n  }\n}\n</code></pre>\n<p><br></p>\n<p>Execute the query once again and get a nicely formatted result set that looks like this.</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL20.png\" alt=\"Habitat Fitness\" /></p>\n<p>Excellent! That looks like some usable data! </p>\n<p>However, having the image name alone isn’t particularly useful. What is needed to display an image are the src and alt properties. These can be found by accessing the <code>Item</code> object and its <code>fields: [ItemFields]</code> array.</p>\n<p>Write a small <em>fragment</em> below the query named ImageQuery. It will cast the incoming <strong>ItemField</strong> as an <strong>ImageField</strong>, returning its <code>alt</code> and <code>src</code> values.</p>\n<pre><code class=\"javascript language-javascript\">fragment ImageQuery on ImageField {\n  alt\n  src\n}\n</code></pre>\n<p>Now add an 'item' property that retrieves a field named <code>image</code>. Have it reference our ImageQuery fragment.</p>\n<pre><code class=\"javascript language-javascript\">{ \n  firstSearch: search(fieldsEqual: [\n    {name:\"_fullpath\", value:\"/sitecore/content/habitatfitness/home/events*\"},\n    {name:\"_templatename\", value:\"event-page\" }\n  ]){\n    results{\n      items {\n        name: field(name: \"name\")\n        description: field(name: \"description\") \n        date: field(name: \"date\")\n        latitude: field(name: \"latitude\")\n        longitude: field(name: \"longitude\")\n        item{\n          image: field(name: \"image\"){\n            ...ImageQuery\n          }\n        }\n      }\n    }\n  }\n}\n\nfragment ImageQuery on ImageField {\n  alt\n  src\n}\n</code></pre>\n<p><br></p>\n<p>Now run the query to see the following:</p>\n<p><img src=\"/assets/img/connected-demo/GraphQL22.png\" alt=\"Habitat Fitness\" /></p>\n<p>Now the image <code>alt</code> and <code>src</code> data is available to display the image in a component. Excellent!</p>\n<p><br></p>\n<p>From here, you might want to add facets to the search; For instance, what if you wanted to look for only items associated with a given language? You might also want to narrow the search to a specific province. </p>\n<p>There is much you can do, and GraphQL provides plenty of tools with which to modify and refine queries.</p>\n"}}}]}}],"jssdocs-footer":[{"uid":"{3C70A750-EA07-5338-9BB7-D2D96EDE3905}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{A2F8CBA8-1BA4-5101-927D-17D82A4A834A}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{DC3C1746-99C3-54E9-BC73-55152F262658}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{80547D60-078E-5A15-B84D-CA78D7A8D490}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>