<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">JSS View Engine/SSR | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Documentation</h1><p class="copy mb-0 p-0">Read and search through all the Sitecore JSS documentation</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><form class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autoComplete="off"/><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"></button></form><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="getting-started$Menu" aria-haspopup="true" title="Getting Started">Getting Started<i class="ant-menu-submenu-arrow"></i></div><ul id="getting-started$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/quick-start">1. Quick Start</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/first-component">2. Your First Component</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/jss-server-install">3. JSS Server Setup</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/app-deployment">4. App Deployment</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-selected" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Fundamentals">Fundamentals<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Client Frameworks">Client Frameworks<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Techniques">Techniques<i class="ant-menu-submenu-arrow"></i></div><div></div></li></ul><div class="navbar-nav bd-navbar-nav flex-column"><a class="nav-link" href="/release-notes">Release Notes</a><a class="nav-link" href="/help">Help</a></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="server-side-javascript-rendering">Server-Side JavaScript rendering</h1>
<p>Server-side JavaScript rendering enables execution of the same JS application you run in dev but now within Content Management environment running full Sitecore instance. Rendering is performed by a rendering engine.</p>
<p>Sitecore provides 2 implementations of a rendering engine:</p>
<ul>
<li>nodejs (enabled by default)</li>
<li>http (available only in Sitecore 9.1.1 and later)</li>
</ul>
<p>You can <a href="/docs/fundamentals/services/app-configuration">configure a rendering engine per JSS app</a> by using the <code>serverSideRenderingEngine</code> attribute. </p>
<blockquote>
  <p>If you are using SXA you can configure a rendering engine in the settings of your JSS tenant. There is an "Server side rendering engine" field for that.</p>
</blockquote>
<h1 id="nodejs-rendering-engine">Node.js rendering engine</h1>
<p>Node.js view engine uses a <code>node.js</code> instance (running on your Content Management server) to server-side render your app.</p>
<p>This is made possible thanks to extensible ASP.NET and Sitecore MVC infrastructure allowing for custom JavaScript renderers to be plugged in, which hand-off the JS bundle and Layout Service output to <code>node.js</code> via ASP.NET NodeServices:</p>
<pre><code class="javascript language-javascript">{
  "name": "home",
   ...
  "placeholders": {
    "name": "main",
    "path": "main",
    "elements": [
      {
        "componentName": "Welcome",
        ...
        "contents": {
          "Text": {
            "value": "World"
          },
          "Title": {
            "value": "Hello"
          }
        }
      }
    ]
  }
}
</code></pre>
<p>The returning HTML string from <code>node.js</code> is returned back in response.</p>
<p>This is how the whole mechanism works in a nutshell.</p>
<p><img src="/assets/img/server-side-rendering.png" alt="Server-side JavaScript rendering" /></p>
<p>The page-level items that correspond to the route are expected to have a conventional presentation details set on them:</p>
<p><img src="/assets/img/layout-details.png" alt="Layout details as normal" /></p>
<p>The <code>JSS App</code> layouts are used simply as indicators of JavaScript-based rendering, and point at an empty Razor view. The <code>WelcomeRendering</code> is a real Sitecore rendering item of a new type <code>React JavaScript Rendering</code> that is defined as usual under <code>/sitecore/layout/renderings</code>.</p>
<p>Each configured <code>&lt;app /&gt;</code> will receive its own <code>node.js</code> engine instance, allowing the applications to run in isolation.</p>
<p>By default, an exported <code>renderView</code> function in your app's server bundle is invoked to produce the static rendering of your application. Note that data passed into this function is "double encoded" in order to preserve JSON formatting, and you must  <code>JSON.parse()</code> it before use.</p>
<blockquote>
  <p>"Mixed-mode" rendering is possible with JSS from two perspectives. You can embed JSS applications in the layout of a standard Sitecore MVC page by use of the <code>EmbeddedJsApp</code> rendering. You can also place any Sitecore rendering in a JSS route and utilize the serialized output of its datasource. You can also place a <code>json=false</code> rendering parameter on any MVC-compatible rendering used in a JSS route to get its rendered HTML output.</p>
</blockquote>
<h2 id="pros-and-cons-of-nodejs-rendering-engine">Pros and cons of Node.js rendering engine</h2>
<p><em>Pros</em></p>
<ul>
<li>Simple setup - just install <code>node.js</code> on Sitecore server</li>
<li>No need to manually manage <code>node.js</code> instances</li>
<li>Built-in pooling</li>
</ul>
<p><em>Cons</em></p>
<ul>
<li>Difficult to customize <code>node.js</code> startup, e.g profiling, debugging</li>
<li>Limited control over pooling / clustering</li>
<li>Need to install <code>node.js</code> on Sitecore servers</li>
<li>JSS app artifacts need to be deployed to Sitecore server</li>
</ul>
<h1 id="http-rendering-engine">Http rendering engine</h1>
<p>Http rendering engine uses a remote <code>node.js</code> instance, also known as rendering host. The communication between Sitecore Content Management instance and a rendering host is performed via a http call. In such a setup, <code>node.js</code> and JSS app artifacts do not need to be deployed to the Content Management server.</p>
<h2 id="how-to-use">How to use</h2>
<p>To configure a http rendering engine you need to make some changes in both client-side and server-side of your JSS app.</p>
<h3 id="client-side-setup">Client-side setup</h3>
<p>The React sample app implementation provides an <a href="https://github.com/Sitecore/jss/tree/dev/samples/react">example</a> of a rendering host setup. </p>
<p>To run the rendering host:</p>
<ol>
<li>Update the <code>tunnelUrl</code> setting in the <code>packages.json</code> file. It should point to a URL of your rendering host (can be local or remote url). For local testing you can set it to "http://localhost:5000". This URL is neededed at build time to replace all static asset urls (such as images, javascript and css files) to become absolute instead of relative. This ensures that static assets are rendered properly by a remote Sitecore instance, since they are not deployed to Sitecore servers anymore.</li>
<li>Run <code>npm run build:rendering-host</code> command. This will build an app for the rendering host and place it into the <em>/build</em> folder. This build is not much different from the default <code>build</code> command: the only difference is that <code>build:rendering-host</code> is replacing static asset URLs to be absolute based on <code>tunnelUrl</code> setting.</li>
<li>Run <code>npm run start:rendering-host</code> command. This will run a rendering host instance on http://localhost:5000 (default) and start a <a href="https://ngrok.com/">Ngrok tunnel</a>. The tunnel will expose your local rendering host to an outside world via a puplic HTTP endpoint. This can be useful when you want to render your JSS app in Experience Editor of a remote Sitecore instance for testing purposes (for example when you are working on a new feature).</li>
</ol>
<h3 id="server-side-setup">Server-side setup</h3>
<p>Update your <a href="/docs/fundamentals/services/app-configuration">JSS app configuration</a>:</p>
<ol>
<li>Set <code>serverSideRenderingEngine</code> to <code>http</code></li>
<li>Set <code>serverSideRenderingEngineEndpointUrl</code> to point to your rendering host URL (e.g http://localhost:5000)</li>
</ol>
<blockquote>
  <p>Note: the URL of a rendering host can also be set dynamically via the <code>sc_httprenderengineurl</code> query string paramter.<br />
  For this to work, ensure that <code>&lt;AllowOptionsOverride&gt;true&lt;/AllowOptionsOverride&gt;</code> is set to <code>true</code> in your http rendering engine configuration (<em>\App_Config\Sitecore\JavaScriptServices\Sitecore.JavaScriptServices.ViewEngine.Http.config</em>).</p>
</blockquote>
<p>After this change Sitecore will start using your remote rendering host for SSR.</p>
<h2 id="pros-and-cons-of-http-rendering-engine">Pros and cons of Http rendering engine</h2>
<p><em>Pros</em></p>
<ul>
<li>Node.js is not needed on Sitecore server, you choose where to host the rendering host</li>
<li>JSS app artifacts do not need to be deployed to Sitecore server</li>
<li>Full control over Node.js management: startup, pooling, clustering, profiling, debugging, etc.</li>
<li>With the help of tunneling software like <a href="https://ngrok.com/">Ngrok</a>, frontend developers are able to test Experience Editor integration by using their local JSS apps for SSR. This is possible by dynamically seting the rendering host URL in Experience Editor with the help of the <code>sc_httprenderengineurl</code> query string parameter.</li>
</ul>
<p><em>Cons</em></p>
<ul>
<li>You need to control the rendering host yourself and ensure it is "awake" and always available</li>
</ul>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/fundamentals/services/view-engine/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"view-engine","fields":{"title":{"value":"JSS View Engine/SSR"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/fundamentals/services/view-engine/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{FE452698-2095-58C7-99A7-0E7DE8C48F50}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{1C5BE30E-05DB-5EB8-9722-793044E2F83F}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{1D0837B6-A1C3-55B8-BD24-CE615679983A}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"docs"}}}]}}],"jssdocs-main":[{"uid":"{3ED69959-B4D5-512A-8D17-D76CD2204315}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{6F761468-1FE8-582A-80BF-26CE7E24803C}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Documentation"},"text":{"value":"Read and search through all the Sitecore JSS documentation"}}}],"jssdocs-aside":[{"uid":"{03D37E4D-6490-5230-B16E-8FCB8BF455DA}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"docs"},"useSearch":{"value":"true"}}}],"jssdocs-content":[{"uid":"{DE7AFA66-DEAA-5F4C-9826-40184BCEBB3D}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"server-side-javascript-rendering\">Server-Side JavaScript rendering</h1>\n<p>Server-side JavaScript rendering enables execution of the same JS application you run in dev but now within Content Management environment running full Sitecore instance. Rendering is performed by a rendering engine.</p>\n<p>Sitecore provides 2 implementations of a rendering engine:</p>\n<ul>\n<li>nodejs (enabled by default)</li>\n<li>http (available only in Sitecore 9.1.1 and later)</li>\n</ul>\n<p>You can <a href=\"/docs/fundamentals/services/app-configuration\">configure a rendering engine per JSS app</a> by using the <code>serverSideRenderingEngine</code> attribute. </p>\n<blockquote>\n  <p>If you are using SXA you can configure a rendering engine in the settings of your JSS tenant. There is an \"Server side rendering engine\" field for that.</p>\n</blockquote>\n<h1 id=\"nodejs-rendering-engine\">Node.js rendering engine</h1>\n<p>Node.js view engine uses a <code>node.js</code> instance (running on your Content Management server) to server-side render your app.</p>\n<p>This is made possible thanks to extensible ASP.NET and Sitecore MVC infrastructure allowing for custom JavaScript renderers to be plugged in, which hand-off the JS bundle and Layout Service output to <code>node.js</code> via ASP.NET NodeServices:</p>\n<pre><code class=\"javascript language-javascript\">{\n  \"name\": \"home\",\n   ...\n  \"placeholders\": {\n    \"name\": \"main\",\n    \"path\": \"main\",\n    \"elements\": [\n      {\n        \"componentName\": \"Welcome\",\n        ...\n        \"contents\": {\n          \"Text\": {\n            \"value\": \"World\"\n          },\n          \"Title\": {\n            \"value\": \"Hello\"\n          }\n        }\n      }\n    ]\n  }\n}\n</code></pre>\n<p>The returning HTML string from <code>node.js</code> is returned back in response.</p>\n<p>This is how the whole mechanism works in a nutshell.</p>\n<p><img src=\"/assets/img/server-side-rendering.png\" alt=\"Server-side JavaScript rendering\" /></p>\n<p>The page-level items that correspond to the route are expected to have a conventional presentation details set on them:</p>\n<p><img src=\"/assets/img/layout-details.png\" alt=\"Layout details as normal\" /></p>\n<p>The <code>JSS App</code> layouts are used simply as indicators of JavaScript-based rendering, and point at an empty Razor view. The <code>WelcomeRendering</code> is a real Sitecore rendering item of a new type <code>React JavaScript Rendering</code> that is defined as usual under <code>/sitecore/layout/renderings</code>.</p>\n<p>Each configured <code>&lt;app /&gt;</code> will receive its own <code>node.js</code> engine instance, allowing the applications to run in isolation.</p>\n<p>By default, an exported <code>renderView</code> function in your app's server bundle is invoked to produce the static rendering of your application. Note that data passed into this function is \"double encoded\" in order to preserve JSON formatting, and you must  <code>JSON.parse()</code> it before use.</p>\n<blockquote>\n  <p>\"Mixed-mode\" rendering is possible with JSS from two perspectives. You can embed JSS applications in the layout of a standard Sitecore MVC page by use of the <code>EmbeddedJsApp</code> rendering. You can also place any Sitecore rendering in a JSS route and utilize the serialized output of its datasource. You can also place a <code>json=false</code> rendering parameter on any MVC-compatible rendering used in a JSS route to get its rendered HTML output.</p>\n</blockquote>\n<h2 id=\"pros-and-cons-of-nodejs-rendering-engine\">Pros and cons of Node.js rendering engine</h2>\n<p><em>Pros</em></p>\n<ul>\n<li>Simple setup - just install <code>node.js</code> on Sitecore server</li>\n<li>No need to manually manage <code>node.js</code> instances</li>\n<li>Built-in pooling</li>\n</ul>\n<p><em>Cons</em></p>\n<ul>\n<li>Difficult to customize <code>node.js</code> startup, e.g profiling, debugging</li>\n<li>Limited control over pooling / clustering</li>\n<li>Need to install <code>node.js</code> on Sitecore servers</li>\n<li>JSS app artifacts need to be deployed to Sitecore server</li>\n</ul>\n<h1 id=\"http-rendering-engine\">Http rendering engine</h1>\n<p>Http rendering engine uses a remote <code>node.js</code> instance, also known as rendering host. The communication between Sitecore Content Management instance and a rendering host is performed via a http call. In such a setup, <code>node.js</code> and JSS app artifacts do not need to be deployed to the Content Management server.</p>\n<h2 id=\"how-to-use\">How to use</h2>\n<p>To configure a http rendering engine you need to make some changes in both client-side and server-side of your JSS app.</p>\n<h3 id=\"client-side-setup\">Client-side setup</h3>\n<p>The React sample app implementation provides an <a href=\"https://github.com/Sitecore/jss/tree/dev/samples/react\">example</a> of a rendering host setup. </p>\n<p>To run the rendering host:</p>\n<ol>\n<li>Update the <code>tunnelUrl</code> setting in the <code>packages.json</code> file. It should point to a URL of your rendering host (can be local or remote url). For local testing you can set it to \"http://localhost:5000\". This URL is neededed at build time to replace all static asset urls (such as images, javascript and css files) to become absolute instead of relative. This ensures that static assets are rendered properly by a remote Sitecore instance, since they are not deployed to Sitecore servers anymore.</li>\n<li>Run <code>npm run build:rendering-host</code> command. This will build an app for the rendering host and place it into the <em>/build</em> folder. This build is not much different from the default <code>build</code> command: the only difference is that <code>build:rendering-host</code> is replacing static asset URLs to be absolute based on <code>tunnelUrl</code> setting.</li>\n<li>Run <code>npm run start:rendering-host</code> command. This will run a rendering host instance on http://localhost:5000 (default) and start a <a href=\"https://ngrok.com/\">Ngrok tunnel</a>. The tunnel will expose your local rendering host to an outside world via a puplic HTTP endpoint. This can be useful when you want to render your JSS app in Experience Editor of a remote Sitecore instance for testing purposes (for example when you are working on a new feature).</li>\n</ol>\n<h3 id=\"server-side-setup\">Server-side setup</h3>\n<p>Update your <a href=\"/docs/fundamentals/services/app-configuration\">JSS app configuration</a>:</p>\n<ol>\n<li>Set <code>serverSideRenderingEngine</code> to <code>http</code></li>\n<li>Set <code>serverSideRenderingEngineEndpointUrl</code> to point to your rendering host URL (e.g http://localhost:5000)</li>\n</ol>\n<blockquote>\n  <p>Note: the URL of a rendering host can also be set dynamically via the <code>sc_httprenderengineurl</code> query string paramter.<br />\n  For this to work, ensure that <code>&lt;AllowOptionsOverride&gt;true&lt;/AllowOptionsOverride&gt;</code> is set to <code>true</code> in your http rendering engine configuration (<em>\\App_Config\\Sitecore\\JavaScriptServices\\Sitecore.JavaScriptServices.ViewEngine.Http.config</em>).</p>\n</blockquote>\n<p>After this change Sitecore will start using your remote rendering host for SSR.</p>\n<h2 id=\"pros-and-cons-of-http-rendering-engine\">Pros and cons of Http rendering engine</h2>\n<p><em>Pros</em></p>\n<ul>\n<li>Node.js is not needed on Sitecore server, you choose where to host the rendering host</li>\n<li>JSS app artifacts do not need to be deployed to Sitecore server</li>\n<li>Full control over Node.js management: startup, pooling, clustering, profiling, debugging, etc.</li>\n<li>With the help of tunneling software like <a href=\"https://ngrok.com/\">Ngrok</a>, frontend developers are able to test Experience Editor integration by using their local JSS apps for SSR. This is possible by dynamically seting the rendering host URL in Experience Editor with the help of the <code>sc_httprenderengineurl</code> query string parameter.</li>\n</ul>\n<p><em>Cons</em></p>\n<ul>\n<li>You need to control the rendering host yourself and ensure it is \"awake\" and always available</li>\n</ul>\n"}}}]}}],"jssdocs-footer":[{"uid":"{E1D4770E-A4F8-5938-87D7-2E71B978D53F}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{4B989311-5517-5B9A-9C52-2643FA51B368}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{067D0D6C-C016-5CC7-A699-2E39C16580C0}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{53C59F26-1604-51AB-9D22-E19CFD998728}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/assets/js/highlight.pack.js"></script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>