<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">JSS View Engine/SSR | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Documentation</h1><p class="copy mb-0 p-0">Read and search through all the Sitecore JSS documentation</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><form class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autoComplete="off"/><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"></button></form><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="getting-started$Menu" aria-haspopup="true" title="Getting Started">Getting Started<i class="ant-menu-submenu-arrow"></i></div><ul id="getting-started$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/quick-start">1. Quick Start</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/first-component">2. Your First Component</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/jss-server-install">3. JSS Server Setup</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/docs/getting-started/app-deployment">4. App Deployment</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-selected" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Fundamentals">Fundamentals<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Client Frameworks">Client Frameworks<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Techniques">Techniques<i class="ant-menu-submenu-arrow"></i></div><div></div></li></ul><div class="navbar-nav bd-navbar-nav flex-column"><a class="nav-link" href="/release-notes">Release Notes</a><a class="nav-link" href="/help">Help</a></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h1 id="the-sitecore-layout-service">The Sitecore Layout Service</h1>
<p>The Sitecore Layout Service is the REST endpoint which provides data for Sitecore JSS apps.<br />
In order to preserve the full capabilities of Sitecore XP within JSS, it's necessary to expose<br />
Sitecore layout as structured data -- "rendering" to JSON rather than HTML markup. Much of the<br />
capability of the platform is based in the rendering engine -- Content Personalization,<br />
Content Testing, and the Experience Editor. By leveraging the same engine to produce structured<br />
JSON output, the Layout Service decouples "layout" and "rendering," enabling you to render<br />
Sitecore components in your chosen JavaScript framework.</p>
<p><img src="/assets/img/layout-service-flow.svg" alt="Layout Service Flow" /></p>
<p>The Layout Service provides additional data about the requested item as well:</p>
<ul>
<li>Includes field values and metadata about the requested item, including its ID and template.</li>
<li>Outputs placeholders and their renderings in a nested tree structure, representative of the parent/child relationships in the layout. This simplifies the rendering logic in the client significantly.</li>
<li>Serializes the content associated with the rendering. By default, this is the rendering's datasource item.</li>
<li>Renders Sitecore fields to structured JSON based on field type, allowing structured use of field values and metadata (e.g. image <code>alt</code> text).</li>
<li>Includes customizable "context" data useful for rendering (e.g. data from <code>Sitecore.Context</code> such as the current site, user, and editing mode).</li>
<li>When executed in editing mode via the Experience Editor, includes:<ul>
<li>Rendered fields with Experience Editor markup for inline editing.</li>
<li>Rendering and placeholder "chromes" from the rendering engine, which allows the Experience Editor to insert editing controls.</li></ul></li>
</ul>
<h2 id="using-the-layout-service">Using the Layout Service</h2>
<p>There are two actions that Layout Service exposes:</p>
<ol>
<li><p>Getting the output of the whole layout for the item.</p>
<pre><code>/sitecore/api/layout/render/[config]?item=[path]&amp;sc_lang=[language]&amp;sc_apikey=[key]&amp;tracking=[true|false]
</code></pre>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>config</code></td>
<td>The name of the Layout Service configuration to use. For JSS, this will usually be <code>jss</code>. More information can be found below on customizing Layout Service configurations.</td>
</tr>
<tr>
<td><code>item</code></td>
<td>The path to the item, relative to the context site's home item or item GUID (ID).</td>
</tr>
<tr>
<td><code>sc_lang</code></td>
<td>The language version of the item you wish to retrieve.</td>
</tr>
<tr>
<td><code>sc_apikey</code></td>
<td>An <a href="https://doc.sitecore.net/sitecore_experience_platform/developing/developing_with_sitecore/sitecoreservicesclient/api_keys_for_the_odata_item_service">SSC API Key</a> which has been configured for use with the Layout Service controller (<code>Sitecore.LayoutService.Mvc.Controllers.LayoutServiceController, Sitecore.LayoutService.Mvc</code>). An API Key is required in the query string or <code>sc_apikey</code> HTTP Header.</td>
</tr>
<tr>
<td><code>tracking</code></td>
<td>(optional) Enables/disables analytics tracking for the Layout Service invocation. Default is <code>true</code>. See details below on the Layout Service and Analytics.</td>
</tr>
</tbody>
</table></li>
<li><p>Getting the output of a particular placeholder.</p>
<p>This action is useful in special circumstances when your app needs to access a portion of the layout, therefore minimizing the amount of data processed and sent over the wire.</p>
<pre><code>/sitecore/api/layout/placeholder/[config]?placeholderName=/main&amp;item=[path]&amp;sc_lang=[language]&amp;sc_apikey=[key]&amp;tracking=[true|false]
</code></pre>
<p>This action accept all the same parameters as the <code>/render</code> action described above, plus one more below.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>placeholderName</code></td>
<td>The name of the placeholder to render. The value of this parameter can be retrieved from the layout details in Content Editor. Due to the dynamic placeholders used out of the box for <code>jss</code>, configuration, make sure you use the dynamic placeholder format here.</td>
</tr>
</tbody>
</table>
<blockquote>
  <p>Consider adding <code>tracking=false</code> if you use this action to avoid extra page visits registered within visit, which will be reflected in xDB. </p>
</blockquote></li>
</ol>
<blockquote>
  <p>Other general Sitecore query string parameters will work with the Layout Service as well, such as <code>sc_camp</code> for triggering an analytics campaign.</p>
</blockquote>
<p>You should always invoke the Layout Service using a host name which will resolve to the desired Site Context, as Layout Service paths are relative to the site Home item. In addition, the site context is needed for the analytics tracking included in Layout Service calls.</p>
<h2 id="the-layout-service-and-sitecore-placeholders">The Layout Service and Sitecore Placeholders</h2>
<p>To output the full structured layout of an item, the Layout Service needs to know what<br />
placeholders are present on a rendering. Previously, this was not exposed as data on a rendering,<br />
rather just through the code of the rendering itself -- e.g. <code>@Html.Sitecore().Placeholder("content")</code>. In order<br />
to make these "exposed" placeholders discoverable, the Layout Service adds a new field to the Sitecore rendering<br />
definition.</p>
<p><img src="/assets/img/layout-service-exposed-placeholders.png" alt="Exposed Placeholders" /></p>
<blockquote>
  <p>This is not to be confused with the <code>Allowed Controls</code> on Placeholder Settings, which defines what renderings can be added to a placeholder. The <code>Layout Service Placeholders</code> field defines the placeholders that will be used within the rendering in your JavaScript component.</p>
</blockquote>
<h3 id="dynamic-placeholder-keys">Dynamic Placeholder Keys</h3>
<p>By default, JSS's configuration of the Layout Service assumes that all placeholders other than the root placeholder (usually <code>main</code>) are <a href="/docs/techniques/dynamic-placeholders">dynamic placeholders</a>, and will use Sitecore's built-in dynamic placeholder logic to determine the actual placeholder keys to "render."</p>
<h2 id="layout-service-and-analytics">Layout Service and Analytics</h2>
<p>The Layout Service executes within the Sitecore MVC rendering engine, and thus retains all Sitecore analytics tracking and functionality. This means that if you use the Layout Service for routing in your JSS app, each route change will reflect as a page view in your analytics data. To avoid confusing URLs in your analytics data, the Layout Service will set the resolved <code>item</code> and its path as the tracked item and URL, respectively.</p>
<p>If you don't want analytics tracking for your JSS app, or for particular Layout Service calls, set the <code>tracking</code> parameter to <code>false</code>.</p>
<h2 id="invoking-the-layout-service-from-jss">Invoking the Layout Service from JSS</h2>
<p>The Sitecore JSS SDK provides a simple API to make utilizing the Layout Service easier. Enter your configuration into the <code>fetchOptions</code> object and pass it into <code>dataApi.fetchRouteData()</code>. The <code>fetcher</code> option enables you to implement whichever data access method you wish. JSS ships with axios, which can be imported from <code>src\dataFetcher.js</code>.</p>
<p>The <code>dataApi</code> object is found in the <code>@sitecore-jss\sitecore-jss</code> package but is also exposed via the framework-specific SDKs</p>
<pre><code class="javascript language-javascript">import { dataApi } from '@sitecore-jss/sitecore-jss-react';
import { dataFetcher } from './dataFetcher'; 

const fetchOptions = {
    fetcher: dataFetcher, 
    layoutServiceConfig: {
        host: 'http://mysitecore',
        configurationName: 'jss',
    },
    querystringParams: {
        sc_lang: 'en',
        tracking: false,
        sc_apikey: '{00000000-0000-0000-0000-000000000000}',
        sc_camp: 'FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF'
    },
    requestConfig: { 
        // AxiosRequestConfig -- https://github.com/axios/axios#request-config
        // Note: `withCredentials: true` is added automatically
        timeout: 3000,
        headers: {
            'X-JSS': 'Experience is asynchronous'
        }
    },
}

dataApi.fetchRouteData('/', fetchOptions).then(route =&gt; {
    console.log(JSON.stringify(route, null, 2));
});
</code></pre>
<h2 id="extending-layout-service">Extending Layout Service</h2>
<p>See <a href="../../techniques/extending-layout-service/extending-layout-service-overview">Layout Service Extensibility</a></p>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/fundamentals/services/view-engine/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"layout-service","fields":{"title":{"value":"Sitecore Layout Service"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/dev/docs/data/routes/docs/fundamentals/services/layout-service/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{B1FACDC6-2464-5870-8D7B-C3CF5D4FBC21}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{45395753-015E-51C9-84D1-95E00970509F}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{9B1CBD0D-507F-566A-BCEE-7498AA5CF7BE}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"docs"}}}]}}],"jssdocs-main":[{"uid":"{45B8C9B5-5F99-5367-B920-C9BBA72294F1}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{5D90D8F6-DB13-56E9-86D3-CA11316CA211}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Documentation"},"text":{"value":"Read and search through all the Sitecore JSS documentation"}}}],"jssdocs-aside":[{"uid":"{91BCECEC-7E4C-5175-889E-AE591F917812}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"docs"},"useSearch":{"value":"true"}}}],"jssdocs-content":[{"uid":"{32510B78-7B03-5367-BAC4-E08742AA4AA3}","componentName":"Article","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h1 id=\"the-sitecore-layout-service\">The Sitecore Layout Service</h1>\n<p>The Sitecore Layout Service is the REST endpoint which provides data for Sitecore JSS apps.<br />\nIn order to preserve the full capabilities of Sitecore XP within JSS, it's necessary to expose<br />\nSitecore layout as structured data -- \"rendering\" to JSON rather than HTML markup. Much of the<br />\ncapability of the platform is based in the rendering engine -- Content Personalization,<br />\nContent Testing, and the Experience Editor. By leveraging the same engine to produce structured<br />\nJSON output, the Layout Service decouples \"layout\" and \"rendering,\" enabling you to render<br />\nSitecore components in your chosen JavaScript framework.</p>\n<p><img src=\"/assets/img/layout-service-flow.svg\" alt=\"Layout Service Flow\" /></p>\n<p>The Layout Service provides additional data about the requested item as well:</p>\n<ul>\n<li>Includes field values and metadata about the requested item, including its ID and template.</li>\n<li>Outputs placeholders and their renderings in a nested tree structure, representative of the parent/child relationships in the layout. This simplifies the rendering logic in the client significantly.</li>\n<li>Serializes the content associated with the rendering. By default, this is the rendering's datasource item.</li>\n<li>Renders Sitecore fields to structured JSON based on field type, allowing structured use of field values and metadata (e.g. image <code>alt</code> text).</li>\n<li>Includes customizable \"context\" data useful for rendering (e.g. data from <code>Sitecore.Context</code> such as the current site, user, and editing mode).</li>\n<li>When executed in editing mode via the Experience Editor, includes:<ul>\n<li>Rendered fields with Experience Editor markup for inline editing.</li>\n<li>Rendering and placeholder \"chromes\" from the rendering engine, which allows the Experience Editor to insert editing controls.</li></ul></li>\n</ul>\n<h2 id=\"using-the-layout-service\">Using the Layout Service</h2>\n<p>There are two actions that Layout Service exposes:</p>\n<ol>\n<li><p>Getting the output of the whole layout for the item.</p>\n<pre><code>/sitecore/api/layout/render/[config]?item=[path]&amp;sc_lang=[language]&amp;sc_apikey=[key]&amp;tracking=[true|false]\n</code></pre>\n<table>\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>config</code></td>\n<td>The name of the Layout Service configuration to use. For JSS, this will usually be <code>jss</code>. More information can be found below on customizing Layout Service configurations.</td>\n</tr>\n<tr>\n<td><code>item</code></td>\n<td>The path to the item, relative to the context site's home item or item GUID (ID).</td>\n</tr>\n<tr>\n<td><code>sc_lang</code></td>\n<td>The language version of the item you wish to retrieve.</td>\n</tr>\n<tr>\n<td><code>sc_apikey</code></td>\n<td>An <a href=\"https://doc.sitecore.net/sitecore_experience_platform/developing/developing_with_sitecore/sitecoreservicesclient/api_keys_for_the_odata_item_service\">SSC API Key</a> which has been configured for use with the Layout Service controller (<code>Sitecore.LayoutService.Mvc.Controllers.LayoutServiceController, Sitecore.LayoutService.Mvc</code>). An API Key is required in the query string or <code>sc_apikey</code> HTTP Header.</td>\n</tr>\n<tr>\n<td><code>tracking</code></td>\n<td>(optional) Enables/disables analytics tracking for the Layout Service invocation. Default is <code>true</code>. See details below on the Layout Service and Analytics.</td>\n</tr>\n</tbody>\n</table></li>\n<li><p>Getting the output of a particular placeholder.</p>\n<p>This action is useful in special circumstances when your app needs to access a portion of the layout, therefore minimizing the amount of data processed and sent over the wire.</p>\n<pre><code>/sitecore/api/layout/placeholder/[config]?placeholderName=/main&amp;item=[path]&amp;sc_lang=[language]&amp;sc_apikey=[key]&amp;tracking=[true|false]\n</code></pre>\n<p>This action accept all the same parameters as the <code>/render</code> action described above, plus one more below.</p>\n<table>\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>placeholderName</code></td>\n<td>The name of the placeholder to render. The value of this parameter can be retrieved from the layout details in Content Editor. Due to the dynamic placeholders used out of the box for <code>jss</code>, configuration, make sure you use the dynamic placeholder format here.</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n  <p>Consider adding <code>tracking=false</code> if you use this action to avoid extra page visits registered within visit, which will be reflected in xDB. </p>\n</blockquote></li>\n</ol>\n<blockquote>\n  <p>Other general Sitecore query string parameters will work with the Layout Service as well, such as <code>sc_camp</code> for triggering an analytics campaign.</p>\n</blockquote>\n<p>You should always invoke the Layout Service using a host name which will resolve to the desired Site Context, as Layout Service paths are relative to the site Home item. In addition, the site context is needed for the analytics tracking included in Layout Service calls.</p>\n<h2 id=\"the-layout-service-and-sitecore-placeholders\">The Layout Service and Sitecore Placeholders</h2>\n<p>To output the full structured layout of an item, the Layout Service needs to know what<br />\nplaceholders are present on a rendering. Previously, this was not exposed as data on a rendering,<br />\nrather just through the code of the rendering itself -- e.g. <code>@Html.Sitecore().Placeholder(\"content\")</code>. In order<br />\nto make these \"exposed\" placeholders discoverable, the Layout Service adds a new field to the Sitecore rendering<br />\ndefinition.</p>\n<p><img src=\"/assets/img/layout-service-exposed-placeholders.png\" alt=\"Exposed Placeholders\" /></p>\n<blockquote>\n  <p>This is not to be confused with the <code>Allowed Controls</code> on Placeholder Settings, which defines what renderings can be added to a placeholder. The <code>Layout Service Placeholders</code> field defines the placeholders that will be used within the rendering in your JavaScript component.</p>\n</blockquote>\n<h3 id=\"dynamic-placeholder-keys\">Dynamic Placeholder Keys</h3>\n<p>By default, JSS's configuration of the Layout Service assumes that all placeholders other than the root placeholder (usually <code>main</code>) are <a href=\"/docs/techniques/dynamic-placeholders\">dynamic placeholders</a>, and will use Sitecore's built-in dynamic placeholder logic to determine the actual placeholder keys to \"render.\"</p>\n<h2 id=\"layout-service-and-analytics\">Layout Service and Analytics</h2>\n<p>The Layout Service executes within the Sitecore MVC rendering engine, and thus retains all Sitecore analytics tracking and functionality. This means that if you use the Layout Service for routing in your JSS app, each route change will reflect as a page view in your analytics data. To avoid confusing URLs in your analytics data, the Layout Service will set the resolved <code>item</code> and its path as the tracked item and URL, respectively.</p>\n<p>If you don't want analytics tracking for your JSS app, or for particular Layout Service calls, set the <code>tracking</code> parameter to <code>false</code>.</p>\n<h2 id=\"invoking-the-layout-service-from-jss\">Invoking the Layout Service from JSS</h2>\n<p>The Sitecore JSS SDK provides a simple API to make utilizing the Layout Service easier. Enter your configuration into the <code>fetchOptions</code> object and pass it into <code>dataApi.fetchRouteData()</code>. The <code>fetcher</code> option enables you to implement whichever data access method you wish. JSS ships with axios, which can be imported from <code>src\\dataFetcher.js</code>.</p>\n<p>The <code>dataApi</code> object is found in the <code>@sitecore-jss\\sitecore-jss</code> package but is also exposed via the framework-specific SDKs</p>\n<pre><code class=\"javascript language-javascript\">import { dataApi } from '@sitecore-jss/sitecore-jss-react';\nimport { dataFetcher } from './dataFetcher'; \n\nconst fetchOptions = {\n    fetcher: dataFetcher, \n    layoutServiceConfig: {\n        host: 'http://mysitecore',\n        configurationName: 'jss',\n    },\n    querystringParams: {\n        sc_lang: 'en',\n        tracking: false,\n        sc_apikey: '{00000000-0000-0000-0000-000000000000}',\n        sc_camp: 'FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF'\n    },\n    requestConfig: { \n        // AxiosRequestConfig -- https://github.com/axios/axios#request-config\n        // Note: `withCredentials: true` is added automatically\n        timeout: 3000,\n        headers: {\n            'X-JSS': 'Experience is asynchronous'\n        }\n    },\n}\n\ndataApi.fetchRouteData('/', fetchOptions).then(route =&gt; {\n    console.log(JSON.stringify(route, null, 2));\n});\n</code></pre>\n<h2 id=\"extending-layout-service\">Extending Layout Service</h2>\n<p>See <a href=\"../../techniques/extending-layout-service/extending-layout-service-overview\">Layout Service Extensibility</a></p>\n"}}}]}}],"jssdocs-footer":[{"uid":"{E66FAF4C-9A92-54B3-8AC1-5DCE9D55F947}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{E8745F35-0804-5727-A589-B8A8971B24FE}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{CF900EDF-121F-5E65-80AF-B6399382CF80}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{221F8AD5-8105-55DE-970A-CC3C5BEB8873}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/assets/js/highlight.pack.js"></script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>