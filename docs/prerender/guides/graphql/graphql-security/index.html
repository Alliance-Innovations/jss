<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">GraphQL Security Guide | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Guides, Patterns, &amp; Recommended Practices</h1><p class="copy mb-0 p-0">A collection of learnings and recommendations from our developers and community, based on learnings from real-world projects.</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="0$Menu" aria-haspopup="true" title="Thinking in JSS">Thinking in JSS<i class="ant-menu-submenu-arrow"></i></div><ul id="0$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/js-vs-jss">JS Apps vs JSS Apps</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/terminology">Sitecore Terminology &amp; Concepts</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/project-structure">Project Structure</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/developer-workflows">Developer Workflows</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="1$Menu" aria-haspopup="true" title="Code Patterns">Code Patterns<i class="ant-menu-submenu-arrow"></i></div><ul id="1$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/code-patterns/layout-service">Layout Service Customization</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/code-patterns/media-handling">Media Handling</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/code-patterns/routing">Routing</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/code-patterns/ssr">SSR Recommendations</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="2$Menu" aria-haspopup="true" title="Multisite Scenarios">Multisite Scenarios<i class="ant-menu-submenu-arrow"></i></div><ul id="2$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/content-patterns">Content Patterns</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/implementation-patterns">Implementation Patterns</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/multi-language-support">Multi-Lingual Support</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/sxa-integration">SXA Integration</a></li></ul></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:24px"><a href="/guides/performance">Performance</a></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="4$Menu" aria-haspopup="true" title="Debugging">Debugging<i class="ant-menu-submenu-arrow"></i></div><ul id="4$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/setup-checklist">Setup Checklist</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/common-pitfalls">Common Pitfalls</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/js-validation">Validation in JS</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/http-status-codes">HTTP Status Codes</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/debugging-help">Debugging Help</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="5$Menu" aria-haspopup="true" title="GraphQL">GraphQL<i class="ant-menu-submenu-arrow"></i></div><ul id="5$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/graphql/extending-graphql">Extending GraphQL</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a class="active" aria-current="page" href="/guides/graphql/graphql-security">Security</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/graphql/query-recipes">Query Recipes</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="6$Menu" aria-haspopup="true" title="🚧 Work in Progress">🚧 Work in Progress<i class="ant-menu-submenu-arrow"></i></div><ul id="6$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/wip/deployment-topologies">Deployment Topologies</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/wip/migration-guide">Migration Guide</a></li></ul></li></ul><div class="navbar-nav bd-navbar-nav flex-column"></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><h1>GraphQL Security Guide</h1><section class="toc-container"><div class="title">In this guide</div><div match="[object Object]" location="[object Object]" history="[object Object]"><div class="toc">
<ul>
<li><a href="#sitecore-developer-documentation">Sitecore Developer Documentation</a></li>
<li><a href="#avoid-using-graphql-mutations">Avoid using GraphQL mutations</a></li>
<li><a href="#dont-rely-on-the-graphql-api-key-to-protect-you">Don't rely on the GraphQL API Key to protect you</a></li>
<li><a href="#disable-graphiql-in-productionnbsp">Disable GraphiQL in Production </a></li>
<li><a href="#set-limits-on-query-complexity">Set limits on query complexity</a></li>
<li><a href="#customize-schema-for-more-security">Customize Schema For More Security</a></li>
<li><a href="#limit-permissions-granted-by-api-key">Limit permissions granted by API key</a></li>
</ul>
</div>

</div></section><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><h2 id="sitecore-developer-documentation">Sitecore Developer Documentation</h2>
<p><a href="https://doc.sitecore.com/developers/100/sitecore-experience-manager/en/graphql-security.html">GraphQL security</a></p>
<h2 id="avoid-using-graphql-mutations">Avoid using GraphQL mutations</h2>
<p>&nbsp;<br />
Unless building a custom administrative app to modify Sitecore content, we do not recommend public sites pushing data back into Sitecore. There are optional GraphQL mutations that enable writing data back, but they are not registered by default for security reasons.<br />
&nbsp;<br />
To disable mutations, simply omit the <code>&lt;mutations&gt;</code> section of the schema configuration.</p>
<hr />
<h2 id="dont-rely-on-the-graphql-api-key-to-protect-you">Don't rely on the GraphQL API Key to protect you</h2>
<p>The API key is exposed since it needs to be sent with every query. The API key&nbsp;is not in any way a security token or password. It is public knowledge, and should not be treated as a secret. It’s just for attribution - it provides the user context that the API runs under, and the CORS settings to allow cross-domain access, if necessary.</p>
<hr />
<h2 id="disable-graphiql-in-productionnbsp">Disable GraphiQL in Production&nbsp;</h2>
<p>GraphiQL can be disabled by setting the value of <code>&lt;graphiql&gt;</code> to <code>false</code>.  At a minimum, it is recommended that you disable this on Content Delivery servers. Any public-facing access should be blocked.</p>
<pre><code class="xml language-xml">&lt;graphiql role:require=“ContentDelivery”&gt;false&lt;/graphiql&gt;
&lt;enableSchemaExport role:require=“ContentDelivery”&gt;false&lt;/enableSchemaExport&gt;
&lt;enableStats role:require=“ContentDelivery”&gt;false&lt;/enableStats&gt;
&lt;enableCacheStats role:require=“ContentDelivery”&gt;false&lt;/enableCacheStats&gt;
&lt;disableIntrospection role:require=“ContentDelivery”&gt;true&lt;/disableIntrospection&gt;
</code></pre>
<hr />
<h2 id="set-limits-on-query-complexity">Set limits on query complexity</h2>
<p>Complexity configuration sets limits for GraphQL queries on your site. This helps protect your site from a DoS attack (aka query bombs).</p>
<ul>
<li><code>maxDepth</code> - sets how many levels of nesting your GraphQL can go before rejection. (<em>note</em>: <code>maxDepth</code> values less than 15 will prevent /ui from running)</li>
<li><code>maxComplexity</code> - sets a limit on the full number of nodes selected across the query.</li>
</ul>
<hr />
<h2 id="customize-schema-for-more-security">Customize Schema For More Security</h2>
<p>For extra sensitive security requirements, do create your own locked-down GraphQL schema to minimize the threat surface, and use query whitelisting to allow only authorized queries (which can be extracted at build time with integration tests if done right) to run.<br />
Reference:  <a href="https://jss.sitecore.com/docs/techniques/graphql/graphql-overview">JSS Docs - The Sitecore GraphQL API</a> </p>
<p>To achieve higher security than what is provided OOTB with JSS GraphQL, there are additional ways to harden your endpoints.&nbsp;Consider the following:</p>
<ul>
<li><p><a href="https://jss.sitecore.com/docs/techniques/graphql/graphql-overview#creating-graphql-schemas">Create your own GraphQL schema</a> by creating your own Schema Provider. Doing so, you can further limit what root fields can be queried through more specific definitions.&nbsp;Extending existing providers will only allow you to add features, so creating a new schema is the appropriate approach to hardening.</p></li>
<li><p>Enable a query whitelist using through the caching mechanism. <a href="https://jss.sitecore.com/docs/techniques/graphql/graphql-overview#caching-and-whitelisting">Caching and Whitelisting</a> can be achieved through a default implementation using the <code>WhitelistingGraphQLQueryCache</code> class.</p></li>
<li><p>Typical authorization of GraphQL can and should be implemented at the node level. This means that the resolver function for that particular node will check authorization before returning any data. This allows you to query public and protected data from the same query and endpoint.</p></li>
<li><p>If the entirety of a GraphQL API endpoint requires authorization, this can be achieved through <a href="https://jss.sitecore.com/docs/techniques/graphql/graphql-overview#authorization">configuration</a>. This configuration can be set up to use Identity Server token, SSO token, etc.</p></li>
</ul>
<hr />
<h2 id="limit-permissions-granted-by-api-key">Limit permissions granted by API key</h2>
<p>By default, the token generated for accessing the GraphQL API grants read access to whatever <code>extranet\anonymous</code> has read access to, which is the entire Sitecore tree.</p>
<p><a href="https://twitter.com/erzr">Adam Lamarre</a> wrote a great guide about how to improve GraphQL security by creating a special user account with restricted access, for use specifically with the GraphQL API Key.<br />
Read the full post: <a href="https://www.adamlamarre.com/creating-a-site-specific-impersonation-user-for-sitecore-jss-graphql/">Creating a Site Specific Impersonation User for Sitecore JSS GraphQL</a></p>
</div><hr/><div>Found a problem? Have something to add? <a href="https://github.com/Sitecore/jss/edit/guides/docs/data/routes/guides/graphql/query-recipes/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"graphql-security","fields":{"title":{"value":"GraphQL Security Recommendations"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/guides/docs/data/routes/guides/graphql/ghraphql-security/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{5D212CB9-1CDD-5D7D-9459-95F626ECB903}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{7DA992F4-4AA9-56FD-B288-A4FB0B603D77}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{87B95B00-072C-5D5A-8D6B-C628FA24BCDE}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"guides"}}}]}}],"jssdocs-main":[{"uid":"{4D0BD88C-CEAF-502B-AC85-301B056E1BE5}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{17A7C89D-FA78-52B2-B417-13E824FE1E70}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Guides, Patterns, & Recommended Practices"},"text":{"value":"A collection of learnings and recommendations from our developers and community, based on learnings from real-world projects."}}}],"jssdocs-aside":[{"uid":"{E59935CB-40CE-59E3-B9C1-A182D7D65609}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"guides"},"useSearch":{"value":"false"}}}],"jssdocs-content":[{"uid":"{B03605B8-075A-5A60-B93A-AFAAF77CAA07}","componentName":"Guide","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<h2 id=\"sitecore-developer-documentation\">Sitecore Developer Documentation</h2>\n<p><a href=\"https://doc.sitecore.com/developers/100/sitecore-experience-manager/en/graphql-security.html\">GraphQL security</a></p>\n<h2 id=\"avoid-using-graphql-mutations\">Avoid using GraphQL mutations</h2>\n<p>&nbsp;<br />\nUnless building a custom administrative app to modify Sitecore content, we do not recommend public sites pushing data back into Sitecore. There are optional GraphQL mutations that enable writing data back, but they are not registered by default for security reasons.<br />\n&nbsp;<br />\nTo disable mutations, simply omit the <code>&lt;mutations&gt;</code> section of the schema configuration.</p>\n<hr />\n<h2 id=\"dont-rely-on-the-graphql-api-key-to-protect-you\">Don't rely on the GraphQL API Key to protect you</h2>\n<p>The API key is exposed since it needs to be sent with every query. The API key&nbsp;is not in any way a security token or password. It is public knowledge, and should not be treated as a secret. It’s just for attribution - it provides the user context that the API runs under, and the CORS settings to allow cross-domain access, if necessary.</p>\n<hr />\n<h2 id=\"disable-graphiql-in-productionnbsp\">Disable GraphiQL in Production&nbsp;</h2>\n<p>GraphiQL can be disabled by setting the value of <code>&lt;graphiql&gt;</code> to <code>false</code>.  At a minimum, it is recommended that you disable this on Content Delivery servers. Any public-facing access should be blocked.</p>\n<pre><code class=\"xml language-xml\">&lt;graphiql role:require=“ContentDelivery”&gt;false&lt;/graphiql&gt;\n&lt;enableSchemaExport role:require=“ContentDelivery”&gt;false&lt;/enableSchemaExport&gt;\n&lt;enableStats role:require=“ContentDelivery”&gt;false&lt;/enableStats&gt;\n&lt;enableCacheStats role:require=“ContentDelivery”&gt;false&lt;/enableCacheStats&gt;\n&lt;disableIntrospection role:require=“ContentDelivery”&gt;true&lt;/disableIntrospection&gt;\n</code></pre>\n<hr />\n<h2 id=\"set-limits-on-query-complexity\">Set limits on query complexity</h2>\n<p>Complexity configuration sets limits for GraphQL queries on your site. This helps protect your site from a DoS attack (aka query bombs).</p>\n<ul>\n<li><code>maxDepth</code> - sets how many levels of nesting your GraphQL can go before rejection. (<em>note</em>: <code>maxDepth</code> values less than 15 will prevent /ui from running)</li>\n<li><code>maxComplexity</code> - sets a limit on the full number of nodes selected across the query.</li>\n</ul>\n<hr />\n<h2 id=\"customize-schema-for-more-security\">Customize Schema For More Security</h2>\n<p>For extra sensitive security requirements, do create your own locked-down GraphQL schema to minimize the threat surface, and use query whitelisting to allow only authorized queries (which can be extracted at build time with integration tests if done right) to run.<br />\nReference:  <a href=\"https://jss.sitecore.com/docs/techniques/graphql/graphql-overview\">JSS Docs - The Sitecore GraphQL API</a> </p>\n<p>To achieve higher security than what is provided OOTB with JSS GraphQL, there are additional ways to harden your endpoints.&nbsp;Consider the following:</p>\n<ul>\n<li><p><a href=\"https://jss.sitecore.com/docs/techniques/graphql/graphql-overview#creating-graphql-schemas\">Create your own GraphQL schema</a> by creating your own Schema Provider. Doing so, you can further limit what root fields can be queried through more specific definitions.&nbsp;Extending existing providers will only allow you to add features, so creating a new schema is the appropriate approach to hardening.</p></li>\n<li><p>Enable a query whitelist using through the caching mechanism. <a href=\"https://jss.sitecore.com/docs/techniques/graphql/graphql-overview#caching-and-whitelisting\">Caching and Whitelisting</a> can be achieved through a default implementation using the <code>WhitelistingGraphQLQueryCache</code> class.</p></li>\n<li><p>Typical authorization of GraphQL can and should be implemented at the node level. This means that the resolver function for that particular node will check authorization before returning any data. This allows you to query public and protected data from the same query and endpoint.</p></li>\n<li><p>If the entirety of a GraphQL API endpoint requires authorization, this can be achieved through <a href=\"https://jss.sitecore.com/docs/techniques/graphql/graphql-overview#authorization\">configuration</a>. This configuration can be set up to use Identity Server token, SSO token, etc.</p></li>\n</ul>\n<hr />\n<h2 id=\"limit-permissions-granted-by-api-key\">Limit permissions granted by API key</h2>\n<p>By default, the token generated for accessing the GraphQL API grants read access to whatever <code>extranet\\anonymous</code> has read access to, which is the entire Sitecore tree.</p>\n<p><a href=\"https://twitter.com/erzr\">Adam Lamarre</a> wrote a great guide about how to improve GraphQL security by creating a special user account with restricted access, for use specifically with the GraphQL API Key.<br />\nRead the full post: <a href=\"https://www.adamlamarre.com/creating-a-site-specific-impersonation-user-for-sitecore-jss-graphql/\">Creating a Site Specific Impersonation User for Sitecore JSS GraphQL</a></p>\n"},"toc":{"value":"<div class=\"toc\">\n<ul>\n<li><a href=\"#sitecore-developer-documentation\">Sitecore Developer Documentation</a></li>\n<li><a href=\"#avoid-using-graphql-mutations\">Avoid using GraphQL mutations</a></li>\n<li><a href=\"#dont-rely-on-the-graphql-api-key-to-protect-you\">Don't rely on the GraphQL API Key to protect you</a></li>\n<li><a href=\"#disable-graphiql-in-productionnbsp\">Disable GraphiQL in Production </a></li>\n<li><a href=\"#set-limits-on-query-complexity\">Set limits on query complexity</a></li>\n<li><a href=\"#customize-schema-for-more-security\">Customize Schema For More Security</a></li>\n<li><a href=\"#limit-permissions-granted-by-api-key\">Limit permissions granted by API key</a></li>\n</ul>\n</div>\n\n"}}}]}}],"jssdocs-footer":[{"uid":"{4D2898C6-34DC-512E-A66B-0BCA37A9A276}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{0990E790-CDE7-5580-9BAD-454D75CFB8D3}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{A38E849A-82D5-5E75-B55B-05E686A0723E}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{3BA0689C-D20E-5C06-A473-E2951AF63BAD}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/assets/js/highlight.pack.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>